<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EventHub - Professional Event Management</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <script type="text/javascript">
        (function() {
            // Initialize EmailJS with your public key
            // To set up: 1) Go to https://www.emailjs.com/ 2) Sign up 3) Create a Gmail service 4) Create an email template
            // 5) Get your public key from Account > API Keys 6) Replace 'YOUR_PUBLIC_KEY' below
            emailjs.init("YOUR_PUBLIC_KEY");
        })();
    </script>
    <meta name="google-signin-client_id" content="216186738747-71h2f03h0n0eium9no0u8orfin6m6gsd.apps.googleusercontent.com">
    <style>
        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --secondary: #ec4899;
            --success: #22c55e;
            --warning: #f59e0b;
            --danger: #ef4444;
            --gray-50: #f9fafb;
            --gray-100: #f3f4f6;
            --gray-200: #e5e7eb;
            --gray-300: #d1d5db;
            --gray-400: #9ca3af;
            --gray-500: #6b7280;
            --gray-600: #4b5563;
            --gray-700: #374151;
            --gray-800: #1f2937;
            --gray-900: #111827;
            --bg-primary: #f9fafb;
            --bg-secondary: #ffffff;
            --text-primary: #111827;
            --text-secondary: #6b7280;
            --border-color: #e5e7eb;
            --card-bg: #ffffff;
            --sidebar-bg: #ffffff;
            --input-bg: #ffffff;
        }

        [data-theme="dark"] {
            --primary: #818cf8;
            --primary-dark: #6366f1;
            --gray-50: #0f172a;
            --gray-100: #1e293b;
            --gray-200: #334155;
            --gray-300: #475569;
            --gray-400: #64748b;
            --gray-500: #94a3b8;
            --gray-600: #cbd5e1;
            --gray-700: #e2e8f0;
            --gray-800: #f1f5f9;
            --gray-900: #f8fafc;
            --bg-primary: #0f172a;
            --bg-secondary: #1e293b;
            --text-primary: #f8fafc;
            --text-secondary: #94a3b8;
            --border-color: #334155;
            --card-bg: #1e293b;
            --sidebar-bg: #1e293b;
            --input-bg: #334155;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            transition: background 0.3s ease, color 0.3s ease;
        }

        /* Login Page */
        .login-page {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            color: #111827;
        }

        .login-container {
            background: white;
            border-radius: 24px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            width: 100%;
            max-width: 420px;
            padding: 48px 40px;
            animation: slideUp 0.5s ease-out;
            color: #111827;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .login-logo {
            text-align: center;
            margin-bottom: 32px;
        }

        .login-logo i {
            font-size: 56px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .login-logo h1 {
            font-size: 28px;
            font-weight: 700;
            color: #111827;
            margin-top: 16px;
        }

        .login-logo p {
            color: #6b7280;
            margin-top: 8px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #374151;
            font-size: 14px;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            font-size: 15px;
            font-family: inherit;
            transition: all 0.3s ease;
            background: white;
            color: #111827;
        }

        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.1);
        }

        .password-req {
            display: flex;
            align-items: center;
            margin-bottom: 4px;
            transition: color 0.3s ease;
        }

        .password-req i {
            transition: all 0.3s ease;
        }

        .password-req.valid {
            color: #22c55e;
        }

        .password-req.valid i {
            color: #22c55e;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 14px 28px;
            border: none;
            border-radius: 12px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: inherit;
            width: 100%;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(99, 102, 241, 0.4);
        }

        .btn-secondary {
            background: var(--gray-100);
            color: var(--gray-700);
        }

        .btn-secondary:hover {
            background: var(--gray-200);
        }

        .btn-outline {
            background: var(--card-bg);
            border: 2px solid var(--border-color);
            color: var(--text-primary);
        }

        .btn-outline:hover {
            border-color: var(--primary);
            color: var(--primary);
        }

        .btn-sm {
            padding: 8px 16px;
            font-size: 13px;
        }

        .btn-danger {
            background: var(--danger);
            color: white;
        }

        .btn-danger:hover {
            background: #dc2626;
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .divider {
            display: flex;
            align-items: center;
            margin: 24px 0;
            color: #9ca3af;
            font-size: 14px;
        }

        .divider::before,
        .divider::after {
            content: '';
            flex: 1;
            height: 1px;
            background: #e5e7eb;
        }

        .divider span {
            padding: 0 16px;
        }

        .social-login {
            display: flex;
            gap: 12px;
            justify-content: center;
        }

        .social-login button {
            flex: 1;
            padding: 12px;
            border: 2px solid #e5e7eb;
            background: white;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 20px;
        }

        .social-login button:hover {
            border-color: #6366f1;
            background: #f9fafb;
        }

        .g_id_signin {
            width: 100% !important;
            display: flex;
            justify-content: center;
        }

        .g_id_signin > div {
            width: 100% !important;
        }

        .login-footer {
            text-align: center;
            margin-top: 24px;
            color: #6b7280;
            font-size: 14px;
        }

        .login-footer a {
            color: #6366f1;
            text-decoration: none;
            font-weight: 500;
        }

        /* App Layout */
        .app-container {
            display: none;
            min-height: 100vh;
        }

        .app-container.active {
            display: flex;
        }

        /* Sidebar */
        .sidebar {
            width: 280px;
            background: var(--sidebar-bg);
            border-right: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            position: fixed;
            height: 100vh;
            z-index: 100;
            transition: background 0.3s ease;
        }

        .sidebar-header {
            padding: 24px;
            border-bottom: 1px solid var(--border-color);
        }

        .sidebar-logo {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 24px;
            font-weight: 700;
            color: var(--text-primary);
        }

        .sidebar-logo i {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .sidebar-nav {
            flex: 1;
            padding: 16px 12px;
            overflow-y: auto;
        }

        .nav-section {
            margin-bottom: 24px;
        }

        .nav-section-title {
            font-size: 11px;
            font-weight: 600;
            color: var(--gray-400);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            padding: 0 12px;
            margin-bottom: 8px;
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
            color: var(--text-secondary);
            font-weight: 500;
            margin-bottom: 4px;
        }

        .nav-item:hover {
            background: var(--bg-primary);
            color: var(--text-primary);
        }

        .nav-item.active {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
        }

        .nav-item i {
            font-size: 18px;
            width: 24px;
            text-align: center;
        }

        .nav-badge {
            margin-left: auto;
            background: var(--danger);
            color: white;
            font-size: 11px;
            font-weight: 600;
            padding: 2px 8px;
            border-radius: 10px;
        }

        .sidebar-footer {
            padding: 16px;
            border-top: 1px solid var(--border-color);
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .user-profile:hover {
            background: var(--bg-primary);
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 16px;
        }

        .user-info {
            flex: 1;
        }

        .user-name {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 14px;
        }

        .user-email {
            font-size: 12px;
            color: var(--text-secondary);
        }

        /* Main Content */
        .main-content {
            flex: 1;
            margin-left: 280px;
            padding: 32px;
            min-height: 100vh;
            background: var(--bg-primary);
            transition: background 0.3s ease;
        }

        .top-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 32px;
        }

        .page-title h1 {
            font-size: 28px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 4px;
        }

        .page-title p {
            color: var(--text-secondary);
        }

        .header-actions {
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .search-box {
            position: relative;
        }

        .search-box input {
            padding: 12px 16px 12px 44px;
            border: 2px solid var(--border-color);
            border-radius: 12px;
            width: 280px;
            font-size: 14px;
            font-family: inherit;
            transition: all 0.3s ease;
            background: var(--card-bg);
            color: var(--text-primary);
        }

        .search-box input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.1);
        }

        .search-box i {
            position: absolute;
            left: 16px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--gray-400);
        }

        .notification-btn {
            position: relative;
            width: 44px;
            height: 44px;
            border-radius: 12px;
            border: 2px solid var(--border-color);
            background: var(--card-bg);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            color: var(--text-secondary);
            transition: all 0.2s ease;
        }

        .notification-btn:hover {
            border-color: var(--primary);
            color: var(--primary);
        }

        .notification-btn.active {
            background: rgba(99, 102, 241, 0.1);
            border-color: var(--primary);
            color: var(--primary);
        }

        .notification-badge {
            position: absolute;
            top: -2px;
            right: -2px;
            background: var(--danger);
            color: white;
            font-size: 10px;
            font-weight: 600;
            padding: 2px 6px;
            border-radius: 10px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        /* Theme Toggle */
        .theme-toggle {
            width: 44px;
            height: 44px;
            border-radius: 12px;
            border: 2px solid var(--border-color);
            background: var(--card-bg);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            color: var(--text-secondary);
            transition: all 0.2s ease;
        }

        .theme-toggle:hover {
            border-color: var(--primary);
            color: var(--primary);
        }

        /* Notification Dropdown */
        .notification-dropdown {
            position: absolute;
            top: 60px;
            right: 0;
            width: 380px;
            background: var(--card-bg);
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.15);
            border: 1px solid var(--border-color);
            display: none;
            z-index: 1000;
            overflow: hidden;
        }

        .notification-dropdown.active {
            display: block;
            animation: dropdownSlide 0.2s ease-out;
        }

        @keyframes dropdownSlide {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .notification-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 24px;
            border-bottom: 1px solid var(--border-color);
        }

        .notification-header h3 {
            font-size: 16px;
            font-weight: 700;
            color: var(--text-primary);
        }

        .notification-header button {
            background: none;
            border: none;
            color: var(--primary);
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
        }

        .notification-list {
            max-height: 400px;
            overflow-y: auto;
        }

        .notification-item {
            display: flex;
            gap: 16px;
            padding: 16px 24px;
            border-bottom: 1px solid var(--border-color);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .notification-item:hover {
            background: var(--bg-primary);
        }

        .notification-item.unread {
            background: rgba(99, 102, 241, 0.05);
        }

        .notification-item:last-child {
            border-bottom: none;
        }

        .notification-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            flex-shrink: 0;
        }

        .notification-icon.event {
            background: rgba(99, 102, 241, 0.1);
            color: var(--primary);
        }

        .notification-icon.share {
            background: rgba(34, 197, 94, 0.1);
            color: var(--success);
        }

        .notification-icon.reminder {
            background: rgba(245, 158, 11, 0.1);
            color: var(--warning);
        }

        .notification-content {
            flex: 1;
        }

        .notification-content p {
            font-size: 14px;
            color: var(--text-primary);
            margin-bottom: 4px;
            line-height: 1.4;
        }

        .notification-content span {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .notification-dot {
            width: 8px;
            height: 8px;
            background: var(--primary);
            border-radius: 50%;
            flex-shrink: 0;
            margin-top: 4px;
        }

        .notification-footer {
            padding: 16px 24px;
            border-top: 1px solid var(--border-color);
            text-align: center;
        }

        .notification-footer button {
            background: none;
            border: none;
            color: var(--text-secondary);
            font-size: 13px;
            cursor: pointer;
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 24px;
            margin-bottom: 32px;
        }

        .stat-card {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .stat-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 16px;
        }

        .stat-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }

        .stat-icon.blue {
            background: rgba(99, 102, 241, 0.1);
            color: var(--primary);
        }

        .stat-icon.green {
            background: rgba(34, 197, 94, 0.1);
            color: var(--success);
        }

        .stat-icon.orange {
            background: rgba(245, 158, 11, 0.1);
            color: var(--warning);
        }

        .stat-icon.purple {
            background: rgba(236, 72, 153, 0.1);
            color: var(--secondary);
        }

        .stat-trend {
            display: flex;
            align-items: center;
            gap: 4px;
            font-size: 13px;
            font-weight: 500;
            padding: 4px 8px;
            border-radius: 6px;
        }

        .stat-trend.up {
            background: rgba(34, 197, 94, 0.1);
            color: var(--success);
        }

        .stat-value {
            font-size: 32px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 4px;
        }

        .stat-label {
            color: var(--text-secondary);
            font-size: 14px;
        }

        /* Content Sections */
        .content-section {
            display: none;
        }

        .content-section.active {
            display: block;
            animation: fadeIn 0.3s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Events */
        .events-toolbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
            flex-wrap: wrap;
            gap: 16px;
        }

        .filter-tabs {
            display: flex;
            gap: 8px;
            background: var(--card-bg);
            padding: 6px;
            border-radius: 12px;
            border: 1px solid var(--border-color);
        }

        .filter-tab {
            padding: 10px 20px;
            border-radius: 8px;
            border: none;
            background: transparent;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            color: var(--text-secondary);
            transition: all 0.2s ease;
        }

        .filter-tab:hover {
            color: var(--text-primary);
        }

        .filter-tab.active {
            background: var(--gray-900);
            color: white;
        }

        [data-theme="dark"] .filter-tab.active {
            background: var(--primary);
        }

        .events-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(360px, 1fr));
            gap: 24px;
        }

        .event-card {
            background: var(--card-bg);
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .event-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 15px rgba(0,0,0,0.1);
        }

        .event-image {
            height: 180px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 48px;
            position: relative;
        }

        .event-category-badge {
            position: absolute;
            top: 16px;
            left: 16px;
            background: rgba(255, 255, 255, 0.95);
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            color: var(--gray-900);
            text-transform: uppercase;
        }

        .event-body {
            padding: 24px;
        }

        .event-date {
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--primary);
            font-weight: 600;
            font-size: 13px;
            margin-bottom: 12px;
        }

        .event-title {
            font-size: 18px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 12px;
            line-height: 1.4;
        }

        .event-meta {
            display: flex;
            flex-direction: column;
            gap: 8px;
            color: var(--text-secondary);
            font-size: 14px;
            margin-bottom: 16px;
        }

        .event-meta span {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .event-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 16px;
            border-top: 1px solid var(--border-color);
        }

        .attendees {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .attendee-avatars {
            display: flex;
        }

        .attendee-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            border: 2px solid var(--card-bg);
            margin-left: -8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: 600;
            color: white;
        }

        .attendee-avatar:first-child {
            margin-left: 0;
        }

        .attendee-count {
            font-size: 13px;
            color: var(--text-secondary);
        }

        .event-actions {
            display: flex;
            gap: 8px;
        }

        .event-actions button {
            width: 36px;
            height: 36px;
            border-radius: 8px;
            border: none;
            background: var(--bg-primary);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-secondary);
            transition: all 0.2s ease;
        }

        .event-actions button:hover {
            background: var(--border-color);
            color: var(--text-primary);
        }

        .event-actions button.share:hover {
            background: rgba(99, 102, 241, 0.1);
            color: var(--primary);
        }

        .event-actions button.edit:hover {
            background: rgba(245, 158, 11, 0.1);
            color: var(--warning);
        }

        .event-actions button.delete:hover {
            background: rgba(239, 68, 68, 0.1);
            color: var(--danger);
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 80px 20px;
            background: var(--card-bg);
            border-radius: 16px;
            border: 2px dashed var(--border-color);
        }

        .empty-state i {
            font-size: 64px;
            color: var(--gray-400);
            margin-bottom: 24px;
        }

        .empty-state h3 {
            font-size: 20px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .empty-state p {
            color: var(--text-secondary);
            margin-bottom: 24px;
        }

        /* Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 20px;
            backdrop-filter: blur(4px);
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal {
            background: var(--card-bg);
            border-radius: 20px;
            width: 100%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 25px rgba(0,0,0,0.1);
            animation: modalSlideUp 0.3s ease-out;
        }

        @keyframes modalSlideUp {
            from {
                opacity: 0;
                transform: translateY(20px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 24px 32px;
            border-bottom: 1px solid var(--border-color);
        }

        .modal-header h2 {
            font-size: 20px;
            font-weight: 700;
            color: var(--text-primary);
        }

        .modal-close {
            width: 36px;
            height: 36px;
            border-radius: 10px;
            border: none;
            background: var(--bg-primary);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-secondary);
            transition: all 0.2s ease;
        }

        .modal-close:hover {
            background: var(--border-color);
            color: var(--text-primary);
        }

        .modal-body {
            padding: 32px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 12px;
            padding: 24px 32px;
            border-top: 1px solid var(--border-color);
            background: var(--bg-primary);
            border-radius: 0 0 20px 20px;
        }

        /* Share Options */
        .share-options {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
            margin-bottom: 24px;
        }

        .share-option {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            padding: 24px;
            border: 2px solid var(--border-color);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            background: var(--card-bg);
        }

        .share-option:hover {
            border-color: var(--primary);
            background: rgba(99, 102, 241, 0.05);
        }

        .share-option i {
            font-size: 32px;
        }

        .share-option span {
            font-size: 13px;
            font-weight: 500;
            color: var(--text-primary);
        }

        .share-link {
            background: var(--bg-primary);
            padding: 16px;
            border-radius: 12px;
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .share-link input {
            flex: 1;
            padding: 12px;
            border: none;
            background: var(--card-bg);
            border-radius: 8px;
            font-size: 14px;
            color: var(--text-primary);
        }

        /* Toast */
        .toast-container {
            position: fixed;
            top: 24px;
            right: 24px;
            z-index: 1100;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .toast {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 16px 20px;
            box-shadow: 0 20px 25px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            gap: 12px;
            min-width: 300px;
            animation: toastSlideIn 0.3s ease-out;
            border-left: 4px solid var(--success);
        }

        .toast.error {
            border-left-color: var(--danger);
        }

        @keyframes toastSlideIn {
            from {
                opacity: 0;
                transform: translateX(100%);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .toast-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            background: rgba(34, 197, 94, 0.1);
            color: var(--success);
        }

        .toast.error .toast-icon {
            background: rgba(239, 68, 68, 0.1);
            color: var(--danger);
        }

        .toast-content {
            flex: 1;
        }

        .toast-title {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 2px;
        }

        .toast-message {
            font-size: 13px;
            color: var(--text-secondary);
        }

        /* Calendar Grid */
        .calendar-container {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 32px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            border: 1px solid var(--border-color);
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }

        .calendar-nav {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .calendar-nav button {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            border: 2px solid var(--border-color);
            background: var(--card-bg);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            font-size: 16px;
            color: var(--text-primary);
        }

        .calendar-nav button:hover {
            border-color: var(--primary);
            color: var(--primary);
        }

        .calendar-nav h2 {
            font-size: 24px;
            font-weight: 700;
            color: var(--text-primary);
            min-width: 200px;
            text-align: center;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
        }

        .calendar-day-header {
            text-align: center;
            padding: 16px 12px;
            font-weight: 600;
            color: var(--text-secondary);
            font-size: 14px;
            text-transform: uppercase;
        }

        .calendar-day {
            aspect-ratio: 1;
            min-height: 100px;
            background: var(--bg-primary);
            border-radius: 12px;
            border: 2px solid var(--border-color);
            padding: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            position: relative;
        }

        .calendar-day:hover {
            border-color: var(--primary);
            background: rgba(99, 102, 241, 0.02);
        }

        .calendar-day.other-month {
            background: var(--bg-primary);
            opacity: 0.5;
        }

        .calendar-day.today {
            background: rgba(99, 102, 241, 0.1);
            border-color: var(--primary);
            border-width: 2px;
        }

        .calendar-day.selected {
            background: rgba(99, 102, 241, 0.15);
            border-color: var(--primary);
        }

        .calendar-day.has-events {
            border-color: var(--success);
        }

        .calendar-day-number {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 4px;
            font-size: 14px;
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }

        .calendar-day.today .calendar-day-number {
            background: var(--primary);
            color: white;
        }

        .calendar-day.other-month .calendar-day-number {
            color: var(--text-secondary);
        }

        .calendar-events {
            display: flex;
            flex-direction: column;
            gap: 2px;
            width: 100%;
            overflow: hidden;
        }

        .calendar-event {
            font-size: 10px;
            padding: 2px 6px;
            border-radius: 4px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            font-weight: 500;
        }

        .calendar-event.more {
            color: var(--text-secondary);
            font-size: 9px;
        }

        .add-event-btn {
            position: absolute;
            bottom: 4px;
            right: 4px;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--primary);
            color: white;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            opacity: 0;
            transition: all 0.2s ease;
        }

        .calendar-day:hover .add-event-btn {
            opacity: 1;
        }

        .add-event-btn:hover {
            background: var(--primary-dark);
            transform: scale(1.1);
        }

        /* Analytics Styles */
        .analytics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 24px;
            margin-bottom: 24px;
        }

        .analytics-card {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            border: 1px solid var(--border-color);
        }

        .analytics-card h3 {
            font-size: 16px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 20px;
        }

        .analytics-card.full-width {
            grid-column: 1 / -1;
        }

        .chart-container {
            position: relative;
            height: 300px;
        }

        .analytics-summary {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
            margin-top: 20px;
        }

        .analytics-stat {
            text-align: center;
            padding: 16px;
            background: var(--bg-primary);
            border-radius: 12px;
        }

        .analytics-stat-value {
            font-size: 24px;
            font-weight: 700;
            color: var(--text-primary);
        }

        .analytics-stat-label {
            font-size: 13px;
            color: var(--text-secondary);
            margin-top: 4px;
        }

        /* Settings Card */
        .settings-card {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 32px;
            margin-bottom: 24px;
            border: 1px solid var(--border-color);
        }

        .settings-card h3 {
            font-size: 18px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .settings-card p {
            color: var(--text-secondary);
            margin-bottom: 24px;
            font-size: 14px;
        }

        .settings-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 0;
            border-bottom: 1px solid var(--border-color);
        }

        .settings-item:last-child {
            border-bottom: none;
            padding-bottom: 0;
        }

        .settings-item-info h4 {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 4px;
        }

        .settings-item-info p {
            color: var(--text-secondary);
            font-size: 13px;
            margin: 0;
        }

        .settings-input {
            padding: 8px 12px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 14px;
            font-family: inherit;
            background: var(--input-bg);
            color: var(--text-primary);
            min-width: 200px;
        }

        .settings-input:focus {
            outline: none;
            border-color: var(--primary);
        }

        /* Toggle Switch */
        .toggle {
            position: relative;
            width: 52px;
            height: 28px;
        }

        .toggle input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--gray-300);
            transition: 0.3s;
            border-radius: 28px;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 3px;
            bottom: 3px;
            background: white;
            transition: 0.3s;
            border-radius: 50%;
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }

        input:checked + .toggle-slider {
            background: var(--primary);
        }

        input:checked + .toggle-slider:before {
            transform: translateX(24px);
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s ease;
            }

            .main-content {
                margin-left: 0;
            }
        }

        @media (max-width: 900px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }

            .events-grid {
                grid-template-columns: 1fr;
            }

            .form-row {
                grid-template-columns: 1fr;
            }

            .search-box input {
                width: 200px;
            }

            .calendar-grid {
                gap: 4px;
            }

            .calendar-day {
                min-height: 60px;
                padding: 4px;
            }

            .calendar-day-header {
                padding: 12px 4px;
                font-size: 12px;
            }

            .analytics-grid {
                grid-template-columns: 1fr;
            }
            /* Mobile: sidebar management */
            #sidebarOverlay { display: none; }
        }
        @media (max-width: 900px) {
            .sidebar { position: fixed; left: 0; top: 0; height: 100%; transform: translateX(-100%); transition: transform .25s ease; z-index: 1000; }
            .sidebar.open { transform: translateX(0); }
            .main-content { margin-left: 0; }
            #sidebarToggleBtn { display: inline-flex; position: fixed; top: 12px; left: 12px; z-index: 1100; }
            #sidebarOverlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,.4); z-index: 999; }
            #sidebarOverlay.active { display: block; }
        }
    </style>
</head>
<body>
    <!-- Login Page -->
    <div class="login-page" id="loginPage">
        <div class="login-container">
            <div class="login-logo">
                <i class="fas fa-calendar-alt"></i>
                <h1>EventHub</h1>
                <p>Professional Event Management Platform</p>
            </div>
            
            <form id="loginForm">
                <div class="form-group">
                    <label for="email">Email Address</label>
                    <input type="email" id="email" placeholder="you@example.com" required>
                </div>
                
                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" placeholder="••••••••" required>
                </div>

                <div id="loginError" style="display: none; background: rgba(239, 68, 68, 0.1); color: #ef4444; padding: 12px; border-radius: 8px; margin-bottom: 16px; font-size: 14px;">
                    <i class="fas fa-exclamation-circle" style="margin-right: 8px;"></i>
                    <span id="loginErrorText">Invalid email or password</span>
                </div>
                
                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-sign-in-alt"></i>
                    Sign In
                </button>
            </form>
            
            <div class="divider">
                <span>or continue with</span>
            </div>
            
            <div id="g_id_onload"
                data-client_id="216186738747-71h2f03h0n0eium9no0u8orfin6m6gsd.apps.googleusercontent.com"
                data-context="signin"
                data-ux_mode="popup"
                data-auto_prompt="false"
                data-callback="handleGoogleSignIn">
            </div>

            <div class="social-login">
                <div class="g_id_signin"
                    data-type="standard"
                    data-size="large"
                    data-theme="outline"
                    data-text="sign_in_with"
                    data-shape="rectangular"
                    data-logo_alignment="left"
                    data-width="300">
                </div>
            </div>
            
            <div style="text-align: center; margin: 16px 0; color: var(--gray-400); font-size: 13px;">
                <span>or continue with</span>
            </div>
            
            <div class="social-login" style="justify-content: center; gap: 16px;">
                <button onclick="socialLogin('facebook')" style="width: 50px; height: 50px; border-radius: 50%; display: flex; align-items: center; justify-content: center;" title="Facebook (Coming Soon)">
                    <i class="fab fa-facebook-f" style="color: #4267B2; font-size: 20px;"></i>
                </button>
                <button onclick="socialLogin('apple')" style="width: 50px; height: 50px; border-radius: 50%; display: flex; align-items: center; justify-content: center;" title="Apple (Coming Soon)">
                    <i class="fab fa-apple" style="color: #000; font-size: 20px;"></i>
                </button>
            </div>
            
            <div class="login-footer">
                <p>Don't have an account? <a href="#" onclick="showRegister()">Sign up</a></p>
                <p style="margin-top: 8px; font-size: 12px; color: var(--gray-400);">
                    <a href="#" onclick="showForgotPassword()" style="color: var(--gray-500);">Forgot password?</a>
                </p>
            </div>
        </div>
    </div>

    <!-- Register Page -->
    <div class="login-page" id="registerPage" style="display: none;">
        <div class="login-container">
            <div class="login-logo">
                <i class="fas fa-user-plus"></i>
                <h1>Create Account</h1>
                <p>Join EventHub today</p>
            </div>
            
            <form id="registerForm">
                <div class="form-row">
                    <div class="form-group">
                        <label for="firstName">First Name</label>
                        <input type="text" id="firstName" placeholder="John" required>
                    </div>
                    <div class="form-group">
                        <label for="lastName">Last Name</label>
                        <input type="text" id="lastName" placeholder="Doe" required>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="regEmail">Email Address</label>
                    <input type="email" id="regEmail" placeholder="you@example.com" required>
                </div>
                
                <div class="form-group">
                    <label for="regPassword">Password</label>
                    <input type="password" id="regPassword" placeholder="••••••••" required oninput="validatePasswordStrength()">
                    <div style="margin-top: 8px; font-size: 12px; color: var(--gray-500);">
                        <div id="passwordRequirements">
                            <div class="password-req" id="req-length"><i class="fas fa-circle" style="font-size: 6px; margin-right: 6px;"></i>At least 8 characters</div>
                            <div class="password-req" id="req-uppercase"><i class="fas fa-circle" style="font-size: 6px; margin-right: 6px;"></i>One uppercase letter</div>
                            <div class="password-req" id="req-number"><i class="fas fa-circle" style="font-size: 6px; margin-right: 6px;"></i>One number</div>
                            <div class="password-req" id="req-special"><i class="fas fa-circle" style="font-size: 6px; margin-right: 6px;"></i>One special character (!@#$%^&*)</div>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="regConfirmPassword">Confirm Password</label>
                    <input type="password" id="regConfirmPassword" placeholder="••••••••" required>
                </div>

                <div id="registerError" style="display: none; background: rgba(239, 68, 68, 0.1); color: #ef4444; padding: 12px; border-radius: 8px; margin-bottom: 16px; font-size: 14px;">
                    <i class="fas fa-exclamation-circle" style="margin-right: 8px;"></i>
                    <span id="registerErrorText">Registration failed</span>
                </div>
                
                <div id="registerSuccess" style="display: none; background: rgba(34, 197, 94, 0.1); color: #22c55e; padding: 12px; border-radius: 8px; margin-bottom: 16px; font-size: 14px;">
                    <i class="fas fa-check-circle" style="margin-right: 8px;"></i>
                    <span>Account created successfully! Please sign in.</span>
                </div>
                
                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-user-plus"></i>
                    Create Account
                </button>
            </form>
            
            <div class="login-footer">
                <p>Already have an account? <a href="#" onclick="showLogin()">Sign in</a></p>
            </div>
        </div>
    </div>

    <!-- Forgot Password Page -->
    <div class="login-page" id="forgotPasswordPage" style="display: none;">
        <div class="login-container">
            <div class="login-logo">
                <i class="fas fa-key"></i>
                <h1>Reset Password</h1>
                <p>Enter your email to reset your password</p>
            </div>
            
            <form id="forgotPasswordForm">
                <div class="form-group">
                    <label for="resetEmail">Email Address</label>
                    <input type="email" id="resetEmail" placeholder="you@example.com" required>
                </div>

                <div id="resetError" style="display: none; background: rgba(239, 68, 68, 0.1); color: #ef4444; padding: 12px; border-radius: 8px; margin-bottom: 16px; font-size: 14px;">
                    <i class="fas fa-exclamation-circle" style="margin-right: 8px;"></i>
                    <span id="resetErrorText">Email not found</span>
                </div>

                <div id="resetSuccess" style="display: none; background: rgba(34, 197, 94, 0.1); color: #22c55e; padding: 12px; border-radius: 8px; margin-bottom: 16px; font-size: 14px;">
                    <i class="fas fa-check-circle" style="margin-right: 8px;"></i>
                    <span>Password reset instructions sent to your email!</span>
                </div>
                
                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-paper-plane"></i>
                    Send Reset Link
                </button>
            </form>
            
            <div class="login-footer">
                <p>Remember your password? <a href="#" onclick="showLogin()">Sign in</a></p>
            </div>
        </div>
    </div>

    <!-- Main App -->
    <div class="app-container" id="appContainer">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-logo">
                    <i class="fas fa-calendar-alt"></i>
                    EventHub
                </div>
            </div>
            
            <nav class="sidebar-nav">
                <div class="nav-section">
                    <div class="nav-section-title">Main</div>
                    <div class="nav-item active" onclick="showSection('dashboard')">
                        <i class="fas fa-home"></i>
                        Dashboard
                    </div>
                    <div class="nav-item" onclick="showSection('events')">
                        <i class="fas fa-calendar"></i>
                        My Events
                        <span class="nav-badge" id="eventBadge">0</span>
                    </div>
                    <div class="nav-item" onclick="showSection('calendar')">
                        <i class="fas fa-calendar-alt"></i>
                        Calendar
                    </div>
                    <div class="nav-item" onclick="showSection('analytics')">
                        <i class="fas fa-chart-bar"></i>
                        Analytics
                    </div>
                </div>
                
                <div class="nav-section">
                    <div class="nav-section-title">Manage</div>
                    <div class="nav-item" onclick="showSection('attendees')">
                        <i class="fas fa-users"></i>
                        Attendees
                    </div>
                    <div class="nav-item" style="opacity: 0.5; cursor: not-allowed;" title="Coming Soon">
                        <i class="fas fa-envelope" style="color: var(--gray-400);"></i>
                        <span style="color: var(--gray-400);">Invitations</span>
                        <span class="nav-badge" style="background: var(--gray-400); font-size: 9px;">Soon</span>
                    </div>
                    <div class="nav-item" onclick="showSection('templates')">
                        <i class="fas fa-layer-group"></i>
                        Templates
                    </div>
                </div>
                
                <div class="nav-section">
                    <div class="nav-section-title">Settings</div>
                    <div class="nav-item" onclick="showSection('settings')">
                        <i class="fas fa-cog"></i>
                        Settings
                    </div>
                    <div class="nav-item" onclick="showSection('help')">
                        <i class="fas fa-question-circle"></i>
                        Help & Support
                    </div>
                </div>
            </nav>
            
            <div class="sidebar-footer" style="position: relative;">
                <div class="user-profile" onclick="toggleProfileMenu(event)" style="cursor: pointer;">
                    <div class="user-avatar" id="userAvatar">JD</div>
                    <div class="user-info">
                        <div class="user-name" id="userName">John Doe</div>
                        <div class="user-email" id="userEmail">john@example.com</div>
                    </div>
                    <i class="fas fa-caret-down" id="profileCaret" style="color: var(--gray-400);"></i>
                </div>
                <div id="profileMenu" class="profile-menu" style="display:none; position: absolute; bottom: 66px; left: 8px; background: white; border: 1px solid var(--border-color); border-radius: 8px; box-shadow: 0 6px 20px rgba(0,0,0,.15); overflow: hidden; z-index: 1000;">
                    <div class="profile-menu-item" onclick="showSection('settings'); closeProfileMenu()">Profile</div>
                    <div class="profile-menu-item" onclick="logout(); closeProfileMenu()">Sign Out</div>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Top Header -->
            <header class="top-header">
                <div class="page-title">
                    <h1 id="pageTitle">Dashboard</h1>
                    <p id="pageSubtitle">Welcome back! Here's what's happening with your events.</p>
                </div>
                <div class="header-actions">
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" placeholder="Search events..." id="searchInput">
                    </div>
                    <button class="theme-toggle" id="themeToggle" onclick="toggleTheme()">
                        <i class="fas fa-moon"></i>
                    </button>
                    <div style="position: relative;">
                        <button class="notification-btn" id="notificationBtn" onclick="toggleNotifications()">
                            <i class="fas fa-bell"></i>
                            <span class="notification-badge" id="notificationCount">0</span>
                        </button>
                        <div class="notification-dropdown" id="notificationDropdown">
                            <div class="notification-header">
                                <h3>Notifications</h3>
                                <button onclick="markAllAsRead()">Mark all as read</button>
                            </div>
                            <div class="notification-list" id="notificationList">
                                <!-- Notifications will be rendered here -->
                            </div>
                            <div class="notification-footer">
                                <button onclick="viewAllNotifications()">View all notifications</button>
                            </div>
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="openCreateModal()">
                        <i class="fas fa-plus"></i>
                        Create Event
                    </button>
                </div>
            </header>
            <!-- Mobile Navigation Toggle -->
            <button id="sidebarToggleBtn" class="btn btn-outline" onclick="toggleSidebar()" aria-label="Open menu" title="Menu" style="display:none; position: fixed; top: 12px; left: 12px; z-index: 1100;">
                <i class="fas fa-bars"></i>
            </button>
            <div id="sidebarOverlay" class="sidebar-overlay" onclick="toggleSidebar()"></div>

            <!-- Dashboard Section -->
            <section class="content-section active" id="dashboardSection">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-icon blue">
                                <i class="fas fa-calendar-check"></i>
                            </div>
                            <div class="stat-trend up">
                                <i class="fas fa-arrow-up"></i>
                                12%
                            </div>
                        </div>
                        <div class="stat-value" id="statTotalEvents">0</div>
                        <div class="stat-label">Total Events</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-icon green">
                                <i class="fas fa-clock"></i>
                            </div>
                            <div class="stat-trend up">
                                <i class="fas fa-arrow-up"></i>
                                8%
                            </div>
                        </div>
                        <div class="stat-value" id="statUpcomingEvents">0</div>
                        <div class="stat-label">Upcoming Events</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-icon orange">
                                <i class="fas fa-users"></i>
                            </div>
                            <div class="stat-trend up">
                                <i class="fas fa-arrow-up"></i>
                                24%
                            </div>
                        </div>
                        <div class="stat-value" id="statTotalAttendees">0</div>
                        <div class="stat-label">Total Attendees</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-header">
                            <div class="stat-icon purple">
                                <i class="fas fa-share-alt"></i>
                            </div>
                            <div class="stat-trend up">
                                <i class="fas fa-arrow-up"></i>
                                18%
                            </div>
                        </div>
                        <div class="stat-value" id="statShares">0</div>
                        <div class="stat-label">Event Shares</div>
                    </div>
                </div>

                <div class="events-toolbar">
                    <h2 style="font-size: 20px; font-weight: 700; color: var(--text-primary);">Recent Events</h2>
                    <button class="btn btn-outline btn-sm" onclick="showSection('events')">
                        View All
                        <i class="fas fa-arrow-right"></i>
                    </button>
                </div>

                <div id="dashboardEvents" class="events-grid">
                    <!-- Recent events will be rendered here -->
                </div>
            </section>

            <!-- Events Section -->
            <section class="content-section" id="eventsSection">
                <div class="events-toolbar">
                    <div class="filter-tabs">
                        <button class="filter-tab active" onclick="filterEvents('all')">All Events</button>
                        <button class="filter-tab" onclick="filterEvents('upcoming')">Upcoming</button>
                        <button class="filter-tab" onclick="filterEvents('past')">Past</button>
                        <button class="filter-tab" onclick="filterEvents('draft')">Drafts</button>
                    </div>
                    <div style="display: flex; gap: 12px;">
                        <button class="btn btn-outline btn-sm">
                            <i class="fas fa-filter"></i>
                            Filter
                        </button>
                        <button class="btn btn-outline btn-sm">
                            <i class="fas fa-sort"></i>
                            Sort
                        </button>
                    </div>
                </div>

                <div id="allEvents" class="events-grid">
                    <!-- All events will be rendered here -->
                </div>
            </section>

            <!-- Calendar Section -->
            <section class="content-section" id="calendarSection">
                <div class="calendar-container">
                    <div class="calendar-header">
                        <div class="calendar-nav">
                            <button onclick="previousMonth()">
                                <i class="fas fa-chevron-left"></i>
                            </button>
                            <h2 id="calendarMonthYear">January 2026</h2>
                            <button onclick="nextMonth()">
                                <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                        <button class="btn btn-outline btn-sm" onclick="goToToday()">Today</button>
                    </div>
                    <div class="calendar-grid" id="calendarGrid">
                        <!-- Calendar will be rendered here -->
                    </div>
                </div>
            </section>

            <!-- Analytics Section -->
            <section class="content-section" id="analyticsSection">
                <div class="analytics-grid">
                    <div class="analytics-card">
                        <h3>Events Overview</h3>
                        <div class="chart-container">
                            <canvas id="eventsChart"></canvas>
                        </div>
                        <div class="analytics-summary">
                            <div class="analytics-stat">
                                <div class="analytics-stat-value" id="analyticsTotal">0</div>
                                <div class="analytics-stat-label">Total Events</div>
                            </div>
                            <div class="analytics-stat">
                                <div class="analytics-stat-value" id="analyticsThisMonth">0</div>
                                <div class="analytics-stat-label">This Month</div>
                            </div>
                            <div class="analytics-stat">
                                <div class="analytics-stat-value" id="analyticsAvg">0</div>
                                <div class="analytics-stat-label">Avg/Month</div>
                            </div>
                        </div>
                    </div>

                    <div class="analytics-card">
                        <h3>Events by Category</h3>
                        <div class="chart-container">
                            <canvas id="categoryChart"></canvas>
                        </div>
                    </div>

                    <div class="analytics-card full-width">
                        <h3>Monthly Event Trend</h3>
                        <div class="chart-container">
                            <canvas id="trendChart"></canvas>
                        </div>
                    </div>

                    <div class="analytics-card">
                        <h3>Attendance Analytics</h3>
                        <div class="chart-container">
                            <canvas id="attendanceChart"></canvas>
                        </div>
                    </div>

                    <div class="analytics-card">
                        <h3>Event Performance</h3>
                        <div class="chart-container">
                            <canvas id="performanceChart"></canvas>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Attendees Section -->
            <section class="content-section" id="attendeesSection">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
                    <div>
                        <h2 style="font-size: 20px; font-weight: 700; color: var(--text-primary); margin-bottom: 4px;">Attendees</h2>
                        <p style="color: var(--text-secondary);">Manage event participants and RSVPs</p>
                    </div>
                    <button class="btn btn-primary" style="width: auto;" onclick="openAddAttendeeModal()">
                        <i class="fas fa-user-plus"></i>
                        Add Attendee
                    </button>
                </div>

                <div class="events-toolbar">
                    <div class="filter-tabs">
                        <button class="filter-tab active" onclick="filterAttendees('all')">All Attendees</button>
                        <button class="filter-tab" onclick="filterAttendees('confirmed')">Confirmed</button>
                        <button class="filter-tab" onclick="filterAttendees('pending')">Pending</button>
                        <button class="filter-tab" onclick="filterAttendees('declined')">Declined</button>
                    </div>
                    <div style="display: flex; gap: 12px;">
                        <button class="btn btn-outline btn-sm" onclick="exportAttendees()">
                            <i class="fas fa-download"></i>
                            Export
                        </button>
                    </div>
                </div>

                <div id="attendeesList">
                    <!-- Attendees will be rendered here -->
                </div>
            </section>

            <!-- Invitations Section -->
            <section class="content-section" id="invitationsSection">
                <div class="empty-state" style="padding: 100px 40px;">
                    <div style="display: inline-block; background: linear-gradient(135deg, var(--primary), var(--secondary)); padding: 30px; border-radius: 50%; margin-bottom: 24px;">
                        <i class="fas fa-envelope" style="font-size: 64px; color: white;"></i>
                    </div>
                    <h2 style="font-size: 28px; font-weight: 700; color: var(--text-primary); margin-bottom: 12px;">Invitations</h2>
                    <p style="color: var(--text-secondary); font-size: 16px; margin-bottom: 8px; max-width: 400px; margin-left: auto; margin-right: auto;">
                        Send and manage event invitations to your guests
                    </p>
                    <div style="margin-top: 24px; padding: 16px 32px; background: rgba(99, 102, 241, 0.1); border-radius: 12px; display: inline-block;">
                        <span style="color: var(--primary); font-weight: 600; font-size: 18px;">
                            <i class="fas fa-clock" style="margin-right: 8px;"></i>
                            Coming Soon
                        </span>
                    </div>
                    <p style="color: var(--text-secondary); font-size: 14px; margin-top: 24px;">
                        This feature is under development. Check back later!
                    </p>
                </div>
            </section>

            <!-- Templates Section -->
            <section class="content-section" id="templatesSection">
                <div class="events-grid">
                    <div class="event-card" style="cursor: pointer;" onclick="useTemplate('corporate')">
                        <div class="event-image" style="height: 160px;">
                            <i class="fas fa-briefcase"></i>
                        </div>
                        <div class="event-body">
                            <div class="event-title">Corporate Meeting</div>
                            <p style="color: var(--text-secondary); font-size: 14px;">Professional template for business meetings and conferences.</p>
                        </div>
                    </div>
                    <div class="event-card" style="cursor: pointer;" onclick="useTemplate('birthday')">
                        <div class="event-image" style="height: 160px; background: linear-gradient(135deg, #f59e0b 0%, #ef4444 100%);">
                            <i class="fas fa-birthday-cake"></i>
                        </div>
                        <div class="event-body">
                            <div class="event-title">Birthday Party</div>
                            <p style="color: var(--text-secondary); font-size: 14px;">Fun and colorful template for birthday celebrations.</p>
                        </div>
                    </div>
                    <div class="event-card" style="cursor: pointer;" onclick="useTemplate('wedding')">
                        <div class="event-image" style="height: 160px; background: linear-gradient(135deg, #ec4899 0%, #8b5cf6 100%);">
                            <i class="fas fa-heart"></i>
                        </div>
                        <div class="event-body">
                            <div class="event-title">Wedding</div>
                            <p style="color: var(--text-secondary); font-size: 14px;">Elegant template for wedding ceremonies and receptions.</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Settings Section -->
            <section class="content-section" id="settingsSection">
                <div class="settings-card">
                    <h3>Profile Settings</h3>
                    <p>Manage your account information and preferences.</p>
                    
                    <div class="settings-item">
                        <div class="settings-item-info">
                            <h4>First Name</h4>
                            <p id="settingsFirstNameDisplay">John</p>
                        </div>
                        <input type="text" class="settings-input" id="settingsFirstName" placeholder="First Name" value="John">
                    </div>
                    
                    <div class="settings-item">
                        <div class="settings-item-info">
                            <h4>Last Name</h4>
                            <p id="settingsLastNameDisplay">Doe</p>
                        </div>
                        <input type="text" class="settings-input" id="settingsLastName" placeholder="Last Name" value="Doe">
                    </div>
                    
                    <div class="settings-item">
                        <div class="settings-item-info">
                            <h4>Email Address</h4>
                            <p id="settingsEmailDisplay">john@example.com</p>
                        </div>
                        <input type="email" class="settings-input" id="settingsEmailInput" placeholder="Email" value="john@example.com">
                    </div>
                    
                    <div style="margin-top: 20px; text-align: right;">
                        <button class="btn btn-primary btn-sm" onclick="saveProfileSettings()" style="width: auto;">
                            <i class="fas fa-save"></i>
                            Save Changes
                        </button>
                    </div>
                </div>

                <div class="settings-card">
                    <h3>Change Password</h3>
                    <p>Update your account password.</p>
                    
                    <div class="settings-item" style="flex-direction: column; align-items: stretch; gap: 12px;">
                        <input type="password" class="settings-input" id="currentPassword" placeholder="Current Password" style="width: 100%;">
                        <input type="password" class="settings-input" id="newPassword" placeholder="New Password" style="width: 100%;">
                        <input type="password" class="settings-input" id="confirmPassword" placeholder="Confirm New Password" style="width: 100%;">
                    </div>
                    
                    <div style="margin-top: 20px; text-align: right;">
                        <button class="btn btn-primary btn-sm" onclick="changePassword()" style="width: auto;">
                            <i class="fas fa-key"></i>
                            Update Password
                        </button>
                    </div>
                </div>

                <div class="settings-card">
                    <h3>Appearance</h3>
                    <p>Customize the look and feel of the app.</p>
                    
                    <div class="settings-item">
                        <div class="settings-item-info">
                            <h4>Dark Mode</h4>
                            <p>Toggle between light and dark theme</p>
                        </div>
                        <label class="toggle">
                            <input type="checkbox" id="darkModeToggle" onchange="toggleThemeFromSettings()">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>

                <div class="settings-card">
                    <h3>Notifications</h3>
                    <p>Control how and when you receive notifications.</p>
                    
                    <div class="settings-item">
                        <div class="settings-item-info">
                            <h4>Email Notifications</h4>
                            <p>Receive updates about your events via email</p>
                        </div>
                        <label class="toggle">
                            <input type="checkbox" id="emailNotifications" checked onchange="toggleSetting('emailNotifications')">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    
                    <div class="settings-item">
                        <div class="settings-item-info">
                            <h4>Push Notifications</h4>
                            <p>Get real-time notifications in your browser</p>
                        </div>
                        <label class="toggle">
                            <input type="checkbox" id="pushNotifications" checked onchange="toggleSetting('pushNotifications')">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    
                    <div class="settings-item">
                        <div class="settings-item-info">
                            <h4>Event Reminders</h4>
                            <p>Get reminded before your events start</p>
                        </div>
                        <label class="toggle">
                            <input type="checkbox" id="eventReminders" checked onchange="toggleSetting('eventReminders')">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>

                <div class="settings-card">
                    <h3>Data Management</h3>
                    <p>Manage your data and privacy settings.</p>
                    
                    <div class="settings-item">
                        <div class="settings-item-info">
                            <h4>Export Data</h4>
                            <p>Download all your events and data</p>
                        </div>
                        <button class="btn btn-outline btn-sm" onclick="exportData()" style="width: auto;">
                            <i class="fas fa-download"></i>
                            Export
                        </button>
                    </div>
                    
                    <div class="settings-item">
                        <div class="settings-item-info">
                            <h4>Clear All Data</h4>
                            <p>Remove all events and reset your account</p>
                        </div>
                        <button class="btn btn-outline btn-sm" onclick="clearAllData()" style="width: auto;">
                            <i class="fas fa-trash"></i>
                            Clear
                        </button>
                    </div>
                </div>

                <div class="settings-card">
                    <h3>Authentication</h3>
                    <p>Configure Google Sign-In for your app.</p>
                    
                    <div class="settings-item">
                        <div class="settings-item-info">
                            <h4><i class="fab fa-google" style="margin-right: 8px; color: #DB4437;"></i>Google Sign-In</h4>
                            <p id="googleAuthStatus">Configure Google OAuth for sign-in</p>
                        </div>
                        <button class="btn btn-outline btn-sm" onclick="openGoogleConfigModal()" style="width: auto;">
                            <i class="fas fa-cog"></i> Setup
                        </button>
                    </div>
                </div>

                <div class="settings-card">
                    <h3>Email Configuration</h3>
                    <p>Configure EmailJS to send real email invitations.</p>
                    
                    <div class="settings-item">
                        <div class="settings-item-info">
                            <h4><i class="fas fa-envelope" style="margin-right: 8px; color: var(--primary);"></i>EmailJS Setup</h4>
                            <p id="emailjsStatus">Not configured - Click to set up email sending</p>
                        </div>
                        <button class="btn btn-outline btn-sm" onclick="openEmailJSConfigModal()" style="width: auto;">
                            <i class="fas fa-cog"></i> Configure
                        </button>
                    </div>
                </div>

                <div class="settings-card">
                    <h3>Danger Zone</h3>
                    <p>Irreversible actions for your account.</p>
                    
                    <div class="settings-item">
                        <div class="settings-item-info">
                            <h4>Delete Account</h4>
                            <p>Permanently delete your account and all data</p>
                        </div>
                        <button class="btn btn-danger btn-sm" onclick="deleteAccount()" style="width: auto;">Delete</button>
                    </div>
                </div>
            </section>

            <!-- Help Section -->
            <section class="content-section" id="helpSection">
                <div class="settings-card">
                    <h3>Help Center</h3>
                    <p>Find answers to common questions and get support.</p>
                    
                    <div class="settings-item" style="cursor: pointer;" onclick="openDocumentationModal()">
                        <div class="settings-item-info">
                            <h4><i class="fas fa-book" style="margin-right: 8px; color: var(--primary);"></i>Documentation</h4>
                            <p>Learn how to use EventHub effectively</p>
                        </div>
                        <i class="fas fa-chevron-right" style="color: var(--text-secondary);"></i>
                    </div>
                    
                    <div class="settings-item" style="cursor: pointer;" onclick="openVideoTutorialsModal()">
                        <div class="settings-item-info">
                            <h4><i class="fas fa-video" style="margin-right: 8px; color: var(--success);"></i>Video Tutorials</h4>
                            <p>Watch step-by-step guides and tutorials</p>
                        </div>
                        <i class="fas fa-chevron-right" style="color: var(--text-secondary);"></i>
                    </div>
                    
                    <div class="settings-item" style="cursor: pointer;" onclick="openContactSupportModal()">
                        <div class="settings-item-info">
                            <h4><i class="fas fa-headset" style="margin-right: 8px; color: var(--warning);"></i>Contact Support</h4>
                            <p>Get help from our support team</p>
                        </div>
                        <i class="fas fa-chevron-right" style="color: var(--text-secondary);"></i>
                    </div>
                    
                    <div class="settings-item" style="cursor: pointer;" onclick="openFeedbackModal()">
                        <div class="settings-item-info">
                            <h4><i class="fas fa-comment-dots" style="margin-right: 8px; color: var(--secondary);"></i>Feedback</h4>
                            <p>Help us improve EventHub</p>
                        </div>
                        <i class="fas fa-chevron-right" style="color: var(--text-secondary);"></i>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Create/Edit Event Modal -->
    <div class="modal-overlay" id="eventModal">
        <div class="modal">
            <div class="modal-header">
                <h2 id="modalTitle">Create New Event</h2>
                <button class="modal-close" onclick="closeEventModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="eventForm">
                <div class="modal-body">
                    <input type="hidden" id="eventId">
                    
                    <div class="form-group">
                        <label for="eventTitle">Event Title *</label>
                        <input type="text" id="eventTitle" placeholder="e.g., Annual Tech Conference 2026" required>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="eventCategory">Category</label>
                            <select id="eventCategory">
                                <option value="Conference">Conference</option>
                                <option value="Meeting">Meeting</option>
                                <option value="Workshop">Workshop</option>
                                <option value="Social">Social</option>
                                <option value="Party">Party</option>
                                <option value="Sports">Sports</option>
                                <option value="Wedding">Wedding</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="eventType">Event Type</label>
                            <select id="eventType">
                                <option value="in-person">In-Person</option>
                                <option value="virtual">Virtual</option>
                                <option value="hybrid">Hybrid</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="eventDate">Date *</label>
                            <input type="date" id="eventDate" required>
                        </div>
                        <div class="form-group">
                            <label for="eventTime">Time *</label>
                            <input type="time" id="eventTime" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="eventLocation">Location</label>
                        <input type="text" id="eventLocation" placeholder="e.g., Convention Center, New York">
                    </div>
                    
                    <div class="form-group">
                        <label for="eventDescription">Description</label>
                        <textarea id="eventDescription" placeholder="Describe your event..."></textarea>
                    </div>

                    <!-- Attendees Management Section (visible only when editing) -->
                    <div id="attendeesManagementSection" style="display: none; margin-top: 24px; padding-top: 24px; border-top: 2px solid var(--border-color);">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                            <label style="font-weight: 600; color: var(--text-primary); font-size: 16px;">
                                <i class="fas fa-users" style="margin-right: 8px; color: var(--primary);"></i>
                                Event Attendees
                            </label>
                            <button type="button" class="btn btn-outline btn-sm" onclick="openAddAttendeeToEventModal()" style="width: auto;">
                                <i class="fas fa-plus"></i>
                                Add Attendee
                            </button>
                        </div>
                        
                        <div id="eventAttendeesList" style="max-height: 200px; overflow-y: auto;">
                            <!-- Attendees for this event will be rendered here -->
                        </div>

                        <div id="eventAttendeesEmpty" style="text-align: center; padding: 20px; background: var(--bg-primary); border-radius: 8px; display: none;">
                            <i class="fas fa-user-plus" style="font-size: 24px; color: var(--gray-400); margin-bottom: 8px;"></i>
                            <p style="color: var(--text-secondary); font-size: 14px; margin: 0;">No attendees yet. Add participants to this event.</p>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="closeEventModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary" id="saveEventBtn">
                        <i class="fas fa-save"></i>
                        Save Event
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Share Modal -->
    <div class="modal-overlay" id="shareModal">
        <div class="modal" style="max-width: 480px;">
            <div class="modal-header">
                <h2>Share Event</h2>
                <button class="modal-close" onclick="closeShareModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <p style="margin-bottom: 20px; color: var(--text-secondary);">Share this event with your friends and colleagues.</p>
                
                <div class="share-options">
                    <div class="share-option" onclick="shareEvent('whatsapp')">
                        <i class="fab fa-whatsapp" style="color: #25D366;"></i>
                        <span>WhatsApp</span>
                    </div>
                    <div class="share-option" onclick="shareEvent('email')">
                        <i class="fas fa-envelope" style="color: #EA4335;"></i>
                        <span>Email</span>
                    </div>
                    <div class="share-option" onclick="shareEvent('facebook')">
                        <i class="fab fa-facebook" style="color: #1877F2;"></i>
                        <span>Facebook</span>
                    </div>
                    <div class="share-option" onclick="shareEvent('twitter')">
                        <i class="fab fa-twitter" style="color: #1DA1F2;"></i>
                        <span>Twitter</span>
                    </div>
                    <div class="share-option" onclick="shareEvent('linkedin')">
                        <i class="fab fa-linkedin" style="color: #0A66C2;"></i>
                        <span>LinkedIn</span>
                    </div>
                    <div class="share-option" onclick="shareEvent('copy')">
                        <i class="fas fa-link" style="color: var(--text-secondary);"></i>
                        <span>Copy Link</span>
                    </div>
                </div>
                
                <div class="share-link">
                    <input type="text" id="shareUrl" readonly value="https://eventhub.app/e/abc123">
                    <button class="btn btn-primary btn-sm" onclick="copyShareLink()">
                        <i class="fas fa-copy"></i>
                        Copy
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div class="modal-overlay" id="deleteModal">
        <div class="modal" style="max-width: 420px;">
            <div class="modal-body" style="text-align: center; padding: 40px;">
                <div style="width: 80px; height: 80px; background: rgba(239, 68, 68, 0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 24px;">
                    <i class="fas fa-exclamation-triangle" style="font-size: 36px; color: var(--danger);"></i>
                </div>
                <h3 style="font-size: 20px; font-weight: 700; margin-bottom: 12px; color: var(--text-primary);">Delete Event?</h3>
                <p style="color: var(--text-secondary); margin-bottom: 24px;">Are you sure you want to delete this event? This action cannot be undone.</p>
                <div style="display: flex; gap: 12px;">
                    <button class="btn btn-secondary" onclick="closeDeleteModal()" style="flex: 1;">Cancel</button>
                    <button class="btn btn-danger" onclick="confirmDelete()" style="flex: 1;">Delete Event</button>
                </div>
            </div>
        </div>
    </div>

    <!-- EmailJS Configuration Modal -->
    <div class="modal-overlay" id="emailjsConfigModal">
        <div class="modal" style="max-width: 550px;">
            <div class="modal-header">
                <h2><i class="fas fa-envelope" style="color: var(--primary); margin-right: 8px;"></i>Email Setup Required</h2>
                <button class="modal-close" onclick="closeEmailJSConfigModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="emailjsConfigForm">
                <div class="modal-body">
                    <div style="background: rgba(99, 102, 241, 0.1); padding: 16px; border-radius: 12px; margin-bottom: 20px;">
                        <h4 style="color: var(--primary); margin-bottom: 8px; font-weight: 600;">
                            <i class="fas fa-info-circle"></i> How to send real emails:
                        </h4>
                        <ol style="color: var(--text-secondary); font-size: 14px; padding-left: 20px; line-height: 1.8;">
                            <li>Go to <a href="https://www.emailjs.com/" target="_blank" style="color: var(--primary); font-weight: 600;">EmailJS.com</a> and sign up (free)</li>
                            <li>Add a Gmail service in your EmailJS dashboard</li>
                            <li>Create an email template (or use our template)</li>
                            <li>Copy your Service ID, Template ID, and Public Key</li>
                            <li>Paste them below to start sending real emails!</li>
                        </ol>
                    </div>
                    
                    <div class="form-group">
                        <label for="emailjsServiceId">Service ID *</label>
                        <input type="text" id="emailjsServiceId" placeholder="e.g., service_abc123" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="emailjsTemplateId">Template ID *</label>
                        <input type="text" id="emailjsTemplateId" placeholder="e.g., template_xyz789" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="emailjsPublicKey">Public Key *</label>
                        <input type="text" id="emailjsPublicKey" placeholder="e.g., AbCdEfGhIjKlMnOpQrStUv" required>
                    </div>
                    
                    <div style="margin-top: 20px; padding: 16px; background: var(--bg-primary); border-radius: 12px;">
                        <h5 style="font-weight: 600; margin-bottom: 12px; color: var(--text-primary);">Email Template Variables:</h5>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; font-size: 13px; color: var(--text-secondary);">
                            <code style="background: var(--card-bg); padding: 4px 8px; border-radius: 4px;">{{to_email}}</code>
                            <span>Recipient's email</span>
                            <code style="background: var(--card-bg); padding: 4px 8px; border-radius: 4px;">{{to_name}}</code>
                            <span>Recipient's name</span>
                            <code style="background: var(--card-bg); padding: 4px 8px; border-radius: 4px;">{{event_title}}</code>
                            <span>Event title</span>
                            <code style="background: var(--card-bg); padding: 4px 8px; border-radius: 4px;">{{event_date}}</code>
                            <span>Event date</span>
                            <code style="background: var(--card-bg); padding: 4px 8px; border-radius: 4px;">{{event_time}}</code>
                            <span>Event time</span>
                            <code style="background: var(--card-bg); padding: 4px 8px; border-radius: 4px;">{{event_location}}</code>
                            <span>Event location</span>
                            <code style="background: var(--card-bg); padding: 4px 8px; border-radius: 4px;">{{personal_message}}</code>
                            <span>Your message</span>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="closeEmailJSConfigModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i>
                        Save Configuration
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Send Invitation Modal -->
    <div class="modal-overlay" id="invitationModal">
        <div class="modal">
            <div class="modal-header">
                <h2>Send Invitation</h2>
                <button class="modal-close" onclick="closeInvitationModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="invitationForm">
                <div class="modal-body">
                    <div class="form-group">
                        <label for="invitationEvent">Select Event *</label>
                        <select id="invitationEvent" required>
                            <option value="">Choose an event...</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="invitationEmail">Recipient Email *</label>
                        <input type="email" id="invitationEmail" placeholder="friend@example.com" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="invitationName">Recipient Name</label>
                        <input type="text" id="invitationName" placeholder="John Doe">
                    </div>
                    
                    <div class="form-group">
                        <label for="invitationMessage">Personal Message (Optional)</label>
                        <textarea id="invitationMessage" placeholder="Add a personal message to your invitation..."></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="closeInvitationModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-paper-plane"></i>
                        Send Invitation
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Documentation Modal -->
    <div class="modal-overlay" id="documentationModal">
        <div class="modal" style="max-width: 700px; max-height: 85vh;">
            <div class="modal-header">
                <h2><i class="fas fa-book" style="color: var(--primary); margin-right: 8px;"></i>Documentation</h2>
                <button class="modal-close" onclick="closeDocumentationModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body" style="max-height: 60vh; overflow-y: auto;">
                <div class="doc-section" style="margin-bottom: 24px;">
                    <h3 style="color: var(--primary); margin-bottom: 12px; font-size: 18px;">Getting Started</h3>
                    <div style="background: var(--bg-primary); padding: 16px; border-radius: 8px; margin-bottom: 12px;">
                        <h4 style="font-weight: 600; margin-bottom: 8px;">1. Creating Your First Event</h4>
                        <p style="color: var(--text-secondary); font-size: 14px; line-height: 1.6;">
                            Click the "Create Event" button in the top right corner. Fill in the event details including title, date, time, and location. 
                            You can also add a description and select the event category.
                        </p>
                    </div>
                    <div style="background: var(--bg-primary); padding: 16px; border-radius: 8px; margin-bottom: 12px;">
                        <h4 style="font-weight: 600; margin-bottom: 8px;">2. Managing Your Events</h4>
                        <p style="color: var(--text-secondary); font-size: 14px; line-height: 1.6;">
                            View all your events in the "My Events" section. Use the filter tabs to see upcoming, past, or draft events. 
                            Click on any event card to edit or delete it.
                        </p>
                    </div>
                </div>

                <div class="doc-section" style="margin-bottom: 24px;">
                    <h3 style="color: var(--primary); margin-bottom: 12px; font-size: 18px;">Calendar Features</h3>
                    <div style="background: var(--bg-primary); padding: 16px; border-radius: 8px; margin-bottom: 12px;">
                        <h4 style="font-weight: 600; margin-bottom: 8px;">Viewing Events</h4>
                        <p style="color: var(--text-secondary); font-size: 14px; line-height: 1.6;">
                            Navigate to the Calendar section to see all your events in a monthly view. Events are color-coded by category. 
                            Click on any day to see events scheduled for that date.
                        </p>
                    </div>
                    <div style="background: var(--bg-primary); padding: 16px; border-radius: 8px; margin-bottom: 12px;">
                        <h4 style="font-weight: 600; margin-bottom: 8px;">Creating Events from Calendar</h4>
                        <p style="color: var(--text-secondary); font-size: 14px; line-height: 1.6;">
                            Hover over any day in the calendar and click the "+" button to quickly create an event for that specific date.
                        </p>
                    </div>
                </div>

                <div class="doc-section" style="margin-bottom: 24px;">
                    <h3 style="color: var(--primary); margin-bottom: 12px; font-size: 18px;">Sending Invitations</h3>
                    <div style="background: var(--bg-primary); padding: 16px; border-radius: 8px; margin-bottom: 12px;">
                        <h4 style="font-weight: 600; margin-bottom: 8px;">Email Setup</h4>
                        <p style="color: var(--text-secondary); font-size: 14px; line-height: 1.6;">
                            Before sending invitations, configure EmailJS in Settings. You'll need to create a free account at emailjs.com 
                            and connect your Gmail account.
                        </p>
                    </div>
                    <div style="background: var(--bg-primary); padding: 16px; border-radius: 8px; margin-bottom: 12px;">
                        <h4 style="font-weight: 600; margin-bottom: 8px;">Sending Invites</h4>
                        <p style="color: var(--text-secondary); font-size: 14px; line-height: 1.6;">
                            Go to the Invitations section, select an event, enter the recipient's email, and add a personal message. 
                            The invitation will be sent directly to their inbox.
                        </p>
                    </div>
                </div>

                <div class="doc-section" style="margin-bottom: 24px;">
                    <h3 style="color: var(--primary); margin-bottom: 12px; font-size: 18px;">Analytics & Insights</h3>
                    <div style="background: var(--bg-primary); padding: 16px; border-radius: 8px; margin-bottom: 12px;">
                        <h4 style="font-weight: 600; margin-bottom: 8px;">Understanding Your Data</h4>
                        <p style="color: var(--text-secondary); font-size: 14px; line-height: 1.6;">
                            The Analytics section provides visual charts showing your event statistics, including total events, 
                            attendance rates, popular categories, and monthly trends.
                        </p>
                    </div>
                </div>

                <div class="doc-section">
                    <h3 style="color: var(--primary); margin-bottom: 12px; font-size: 18px;">Settings & Customization</h3>
                    <div style="background: var(--bg-primary); padding: 16px; border-radius: 8px; margin-bottom: 12px;">
                        <h4 style="font-weight: 600; margin-bottom: 8px;">Dark Mode</h4>
                        <p style="color: var(--text-secondary); font-size: 14px; line-height: 1.6;">
                            Toggle between light and dark themes using the moon/sun icon in the header or in Settings. 
                            Your preference is saved automatically.
                        </p>
                    </div>
                    <div style="background: var(--bg-primary); padding: 16px; border-radius: 8px;">
                        <h4 style="font-weight: 600; margin-bottom: 8px;">Notifications</h4>
                        <p style="color: var(--text-secondary); font-size: 14px; line-height: 1.6;">
                            Control email and push notifications in Settings. You can enable/disable event reminders, 
                            invitation updates, and other alerts.
                        </p>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closeDocumentationModal()">Close</button>
                <button type="button" class="btn btn-primary" onclick="downloadDocumentation()">
                    <i class="fas fa-download"></i> Download PDF
                </button>
            </div>
        </div>
    </div>

    <!-- Video Tutorials Modal -->
    <div class="modal-overlay" id="videoTutorialsModal">
        <div class="modal" style="max-width: 800px; max-height: 85vh;">
            <div class="modal-header">
                <h2><i class="fas fa-video" style="color: var(--success); margin-right: 8px;"></i>Video Tutorials</h2>
                <button class="modal-close" onclick="closeVideoTutorialsModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body" style="max-height: 60vh; overflow-y: auto;">
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                    <div class="video-card" style="background: var(--bg-primary); border-radius: 12px; overflow: hidden; cursor: pointer; transition: transform 0.2s;" onclick="playVideo('getting-started')">
                        <div style="aspect-ratio: 16/9; background: linear-gradient(135deg, var(--primary), var(--secondary)); display: flex; align-items: center; justify-content: center;">
                            <i class="fas fa-play-circle" style="font-size: 48px; color: white;"></i>
                        </div>
                        <div style="padding: 16px;">
                            <h4 style="font-weight: 600; margin-bottom: 8px;">Getting Started Guide</h4>
                            <p style="color: var(--text-secondary); font-size: 13px; margin-bottom: 8px;">Learn the basics of EventHub in 5 minutes</p>
                            <span style="font-size: 12px; color: var(--text-secondary);"><i class="fas fa-clock" style="margin-right: 4px;"></i>5:32</span>
                        </div>
                    </div>

                    <div class="video-card" style="background: var(--bg-primary); border-radius: 12px; overflow: hidden; cursor: pointer; transition: transform 0.2s;" onclick="playVideo('create-event')">
                        <div style="aspect-ratio: 16/9; background: linear-gradient(135deg, #22c55e, #16a34a); display: flex; align-items: center; justify-content: center;">
                            <i class="fas fa-play-circle" style="font-size: 48px; color: white;"></i>
                        </div>
                        <div style="padding: 16px;">
                            <h4 style="font-weight: 600; margin-bottom: 8px;">Creating Your First Event</h4>
                            <p style="color: var(--text-secondary); font-size: 13px; margin-bottom: 8px;">Step-by-step event creation tutorial</p>
                            <span style="font-size: 12px; color: var(--text-secondary);"><i class="fas fa-clock" style="margin-right: 4px;"></i>4:15</span>
                        </div>
                    </div>

                    <div class="video-card" style="background: var(--bg-primary); border-radius: 12px; overflow: hidden; cursor: pointer; transition: transform 0.2s;" onclick="playVideo('send-invitations')">
                        <div style="aspect-ratio: 16/9; background: linear-gradient(135deg, #f59e0b, #d97706); display: flex; align-items: center; justify-content: center;">
                            <i class="fas fa-play-circle" style="font-size: 48px; color: white;"></i>
                        </div>
                        <div style="padding: 16px;">
                            <h4 style="font-weight: 600; margin-bottom: 8px;">Sending Invitations</h4>
                            <p style="color: var(--text-secondary); font-size: 13px; margin-bottom: 8px;">How to send email invitations with EmailJS</p>
                            <span style="font-size: 12px; color: var(--text-secondary);"><i class="fas fa-clock" style="margin-right: 4px;"></i>7:45</span>
                        </div>
                    </div>

                    <div class="video-card" style="background: var(--bg-primary); border-radius: 12px; overflow: hidden; cursor: pointer; transition: transform 0.2s;" onclick="playVideo('calendar-tips')">
                        <div style="aspect-ratio: 16/9; background: linear-gradient(135deg, #ec4899, #db2777); display: flex; align-items: center; justify-content: center;">
                            <i class="fas fa-play-circle" style="font-size: 48px; color: white;"></i>
                        </div>
                        <div style="padding: 16px;">
                            <h4 style="font-weight: 600; margin-bottom: 8px;">Calendar Tips & Tricks</h4>
                            <p style="color: var(--text-secondary); font-size: 13px; margin-bottom: 8px;">Master the calendar view and navigation</p>
                            <span style="font-size: 12px; color: var(--text-secondary);"><i class="fas fa-clock" style="margin-right: 4px;"></i>3:50</span>
                        </div>
                    </div>

                    <div class="video-card" style="background: var(--bg-primary); border-radius: 12px; overflow: hidden; cursor: pointer; transition: transform 0.2s;" onclick="playVideo('analytics')">
                        <div style="aspect-ratio: 16/9; background: linear-gradient(135deg, #8b5cf6, #7c3aed); display: flex; align-items: center; justify-content: center;">
                            <i class="fas fa-play-circle" style="font-size: 48px; color: white;"></i>
                        </div>
                        <div style="padding: 16px;">
                            <h4 style="font-weight: 600; margin-bottom: 8px;">Understanding Analytics</h4>
                            <p style="color: var(--text-secondary); font-size: 13px; margin-bottom: 8px;">Make sense of your event data and insights</p>
                            <span style="font-size: 12px; color: var(--text-secondary);"><i class="fas fa-clock" style="margin-right: 4px;"></i>6:20</span>
                        </div>
                    </div>

                    <div class="video-card" style="background: var(--bg-primary); border-radius: 12px; overflow: hidden; cursor: pointer; transition: transform 0.2s;" onclick="playVideo('dark-mode')">
                        <div style="aspect-ratio: 16/9; background: linear-gradient(135deg, #0f172a, #1e293b); display: flex; align-items: center; justify-content: center;">
                            <i class="fas fa-play-circle" style="font-size: 48px; color: white;"></i>
                        </div>
                        <div style="padding: 16px;">
                            <h4 style="font-weight: 600; margin-bottom: 8px;">Customization Guide</h4>
                            <p style="color: var(--text-secondary); font-size: 13px; margin-bottom: 8px;">Dark mode, themes, and personalization</p>
                            <span style="font-size: 12px; color: var(--text-secondary);"><i class="fas fa-clock" style="margin-right: 4px;"></i>2:45</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closeVideoTutorialsModal()">Close</button>
                <button type="button" class="btn btn-primary" onclick="openYouTubeChannel()">
                    <i class="fab fa-youtube"></i> Visit YouTube Channel
                </button>
            </div>
        </div>
    </div>

    <!-- Contact Support Modal -->
    <div class="modal-overlay" id="contactSupportModal">
        <div class="modal" style="max-width: 550px;">
            <div class="modal-header">
                <h2><i class="fas fa-headset" style="color: var(--warning); margin-right: 8px;"></i>Contact Support</h2>
                <button class="modal-close" onclick="closeContactSupportModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="supportForm">
                <div class="modal-body">
                    <div style="background: rgba(245, 158, 11, 0.1); padding: 16px; border-radius: 12px; margin-bottom: 20px;">
                        <h4 style="color: var(--warning); margin-bottom: 8px; font-weight: 600;">
                            <i class="fas fa-info-circle"></i> We're here to help!
                        </h4>
                        <p style="color: var(--text-secondary); font-size: 14px;">
                            Fill out the form below and our support team will get back to you within 24 hours.
                            For urgent issues, check our Documentation first.
                        </p>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="supportName">Your Name *</label>
                            <input type="text" id="supportName" required placeholder="John Doe">
                        </div>
                        <div class="form-group">
                            <label for="supportEmail">Email *</label>
                            <input type="email" id="supportEmail" required placeholder="john@example.com">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="supportCategory">Issue Category *</label>
                        <select id="supportCategory" required>
                            <option value="">Select a category...</option>
                            <option value="technical">Technical Issue</option>
                            <option value="account">Account & Login</option>
                            <option value="billing">Billing & Payments</option>
                            <option value="feature">Feature Request</option>
                            <option value="bug">Bug Report</option>
                            <option value="other">Other</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="supportSubject">Subject *</label>
                        <input type="text" id="supportSubject" required placeholder="Brief description of your issue">
                    </div>

                    <div class="form-group">
                        <label for="supportMessage">Message *</label>
                        <textarea id="supportMessage" required rows="5" placeholder="Please describe your issue in detail. Include any error messages and steps to reproduce."></textarea>
                    </div>

                    <div class="form-group">
                        <label style="display: flex; align-items: center; cursor: pointer;">
                            <input type="checkbox" id="supportAttach" style="margin-right: 8px;">
                            <span>Include screenshots or files (you'll be prompted to attach them in the email)</span>
                        </label>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="closeContactSupportModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-paper-plane"></i> Send Message
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Feedback Modal -->
    <div class="modal-overlay" id="feedbackModal">
        <div class="modal" style="max-width: 550px;">
            <div class="modal-header">
                <h2><i class="fas fa-comment-dots" style="color: var(--secondary); margin-right: 8px;"></i>Send Feedback</h2>
                <button class="modal-close" onclick="closeFeedbackModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="feedbackForm">
                <div class="modal-body">
                    <div style="background: rgba(236, 72, 153, 0.1); padding: 16px; border-radius: 12px; margin-bottom: 20px;">
                        <h4 style="color: var(--secondary); margin-bottom: 8px; font-weight: 600;">
                            <i class="fas fa-heart"></i> Help us improve!
                        </h4>
                        <p style="color: var(--text-secondary); font-size: 14px;">
                            Your feedback is valuable to us. Let us know what you love, what we can improve, 
                            or any new features you'd like to see.
                        </p>
                    </div>

                    <div class="form-group">
                        <label>How would you rate your experience? *</label>
                        <div style="display: flex; gap: 12px; margin-top: 8px;">
                            <button type="button" class="rating-btn" data-rating="1" onclick="setRating(1)" style="width: 48px; height: 48px; border: 2px solid var(--border-color); border-radius: 50%; background: transparent; cursor: pointer; font-size: 24px; transition: all 0.2s;">😞</button>
                            <button type="button" class="rating-btn" data-rating="2" onclick="setRating(2)" style="width: 48px; height: 48px; border: 2px solid var(--border-color); border-radius: 50%; background: transparent; cursor: pointer; font-size: 24px; transition: all 0.2s;">😐</button>
                            <button type="button" class="rating-btn" data-rating="3" onclick="setRating(3)" style="width: 48px; height: 48px; border: 2px solid var(--border-color); border-radius: 50%; background: transparent; cursor: pointer; font-size: 24px; transition: all 0.2s;">🙂</button>
                            <button type="button" class="rating-btn" data-rating="4" onclick="setRating(4)" style="width: 48px; height: 48px; border: 2px solid var(--border-color); border-radius: 50%; background: transparent; cursor: pointer; font-size: 24px; transition: all 0.2s;">😊</button>
                            <button type="button" class="rating-btn" data-rating="5" onclick="setRating(5)" style="width: 48px; height: 48px; border: 2px solid var(--border-color); border-radius: 50%; background: transparent; cursor: pointer; font-size: 24px; transition: all 0.2s;">🤩</button>
                        </div>
                        <input type="hidden" id="feedbackRating" required>
                        <p id="ratingText" style="margin-top: 8px; font-size: 14px; color: var(--text-secondary);">Click to rate</p>
                    </div>

                    <div class="form-group">
                        <label for="feedbackType">Feedback Type *</label>
                        <select id="feedbackType" required>
                            <option value="">Select type...</option>
                            <option value="suggestion">Feature Suggestion</option>
                            <option value="improvement">Improvement Idea</option>
                            <option value="compliment">Compliment</option>
                            <option value="issue">Issue/Bug</option>
                            <option value="other">Other</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="feedbackMessage">Your Feedback *</label>
                        <textarea id="feedbackMessage" required rows="5" placeholder="Tell us what you think... What's working well? What could be better?"></textarea>
                    </div>

                    <div class="form-group">
                        <label for="feedbackEmail">Email (optional)</label>
                        <input type="email" id="feedbackEmail" placeholder="your@email.com (if you'd like a response)">
                    </div>

                    <div style="margin-top: 16px; padding: 12px; background: var(--bg-primary); border-radius: 8px;">
                        <label style="display: flex; align-items: flex-start; cursor: pointer;">
                            <input type="checkbox" id="feedbackNewsletter" style="margin-right: 8px; margin-top: 2px;">
                            <span style="font-size: 13px; color: var(--text-secondary);">
                                Keep me updated about new features and improvements
                            </span>
                        </label>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="closeFeedbackModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-paper-plane"></i> Send Feedback
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Attendee Modal (Global) -->
    <div class="modal-overlay" id="addAttendeeModal">
        <div class="modal" style="max-width: 550px;">
            <div class="modal-header">
                <h2><i class="fas fa-user-plus" style="color: var(--primary); margin-right: 8px;"></i>Add Attendee</h2>
                <button class="modal-close" onclick="closeAddAttendeeModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="addAttendeeForm">
                <div class="modal-body">
                    <div class="form-group">
                        <label for="attendeeEvent">Select Event *</label>
                        <select id="attendeeEvent" required>
                            <option value="">Choose an event...</option>
                        </select>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="attendeeFirstName">First Name *</label>
                            <input type="text" id="attendeeFirstName" placeholder="John" required>
                        </div>
                        <div class="form-group">
                            <label for="attendeeLastName">Last Name *</label>
                            <input type="text" id="attendeeLastName" placeholder="Doe" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="attendeeEmail">Email Address *</label>
                        <input type="email" id="attendeeEmail" placeholder="john@example.com" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="attendeePhone">Phone Number</label>
                        <input type="tel" id="attendeePhone" placeholder="+1 (555) 123-4567">
                    </div>
                    
                    <div class="form-group">
                        <label for="attendeeStatus">RSVP Status</label>
                        <select id="attendeeStatus">
                            <option value="confirmed">Confirmed</option>
                            <option value="pending">Pending</option>
                            <option value="declined">Declined</option>
                            <option value="maybe">Maybe</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="attendeeNotes">Notes</label>
                        <textarea id="attendeeNotes" rows="3" placeholder="Dietary restrictions, special requirements, etc."></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="closeAddAttendeeModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-plus"></i> Add Attendee
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Attendee to Event Modal (from Edit Event) -->
    <div class="modal-overlay" id="addAttendeeToEventModal">
        <div class="modal" style="max-width: 550px;">
            <div class="modal-header">
                <h2><i class="fas fa-user-plus" style="color: var(--primary); margin-right: 8px;"></i>Add Participant</h2>
                <button class="modal-close" onclick="closeAddAttendeeToEventModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="addAttendeeToEventForm">
                <input type="hidden" id="attendeeEventId">
                <div class="modal-body">
                    <div style="background: rgba(99, 102, 241, 0.1); padding: 12px; border-radius: 8px; margin-bottom: 20px;">
                        <p style="color: var(--text-secondary); font-size: 14px; margin: 0;">
                            <i class="fas fa-info-circle" style="color: var(--primary); margin-right: 8px;"></i>
                            Adding attendee to: <strong id="attendeeEventName">Event Name</strong>
                        </p>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="eventAttendeeFirstName">First Name *</label>
                            <input type="text" id="eventAttendeeFirstName" placeholder="John" required>
                        </div>
                        <div class="form-group">
                            <label for="eventAttendeeLastName">Last Name *</label>
                            <input type="text" id="eventAttendeeLastName" placeholder="Doe" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="eventAttendeeEmail">Email Address *</label>
                        <input type="email" id="eventAttendeeEmail" placeholder="john@example.com" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="eventAttendeePhone">Phone Number</label>
                        <input type="tel" id="eventAttendeePhone" placeholder="+1 (555) 123-4567">
                    </div>
                    
                    <div class="form-group">
                        <label for="eventAttendeeStatus">RSVP Status</label>
                        <select id="eventAttendeeStatus">
                            <option value="confirmed">Confirmed</option>
                            <option value="pending" selected>Pending</option>
                            <option value="declined">Declined</option>
                            <option value="maybe">Maybe</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="eventAttendeeNotes">Notes</label>
                        <textarea id="eventAttendeeNotes" rows="3" placeholder="Dietary restrictions, special requirements, etc."></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="closeAddAttendeeToEventModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-plus"></i> Add Participant
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <script>
        // App State
        let currentUser = null;
        let events = [];
        let notifications = [];
        let deleteEventId = null;
        let shareEventId = null;
        let isEditing = false;
        let currentTheme = 'light';
        
        // Calendar State
        let currentDate = new Date();
        let selectedDate = null;
        
        // Chart Instances
        let eventsChart = null;
        let categoryChart = null;
        let trendChart = null;
        let attendanceChart = null;
        let performanceChart = null;

        // Initialize App
        document.addEventListener('DOMContentLoaded', () => {
            loadTheme();
            createDemoUser();
            checkAuth();
            setupEventListeners();
            // Initialize responsive UI for mobile
            if (window.innerWidth <= 900) {
                const btn = document.getElementById('sidebarToggleBtn');
                if (btn) btn.style.display = 'inline-flex';
            }
            window.addEventListener('resize', () => {
                if (window.innerWidth <= 900) {
                    const btn = document.getElementById('sidebarToggleBtn');
                    if (btn) btn.style.display = 'inline-flex';
                } else {
                    const btn = document.getElementById('sidebarToggleBtn');
                    if (btn) btn.style.display = 'none';
                    // Ensure sidebar is visible when switching back to desktop
                    const sidebar = document.querySelector('.sidebar');
                    if (sidebar) { sidebar.classList.remove('open'); }
                    const overlay = document.getElementById('sidebarOverlay');
                    if (overlay) overlay.classList.remove('active');
                }
                // Auto-close sidebar if window expands beyond breakpoint
                if (window.innerWidth > 900) {
                    const s = document.querySelector('.sidebar');
                    if (s) s.classList.remove('open');
                    const o = document.getElementById('sidebarOverlay');
                    if (o) o.classList.remove('active');
                }
            });
        });

        // Create demo user if no users exist
        function createDemoUser() {
            const users = getUsers();
            if (Object.keys(users).length === 0) {
                // Create demo account
                const demoPassword = hashPassword('Demo123!');
                users['demo@eventhub.com'] = {
                    id: 'demo-user-001',
                    email: 'demo@eventhub.com',
                    firstName: 'Demo',
                    lastName: 'User',
                    password: demoPassword,
                    createdAt: new Date().toISOString()
                };
                saveUsers(users);
                
                // Show demo credentials info on login page
                setTimeout(() => {
                    const loginFooter = document.querySelector('#loginPage .login-footer');
                    if (loginFooter) {
                        const demoInfo = document.createElement('div');
                        demoInfo.style.cssText = 'margin-top: 20px; padding: 16px; background: rgba(99, 102, 241, 0.1); border-radius: 12px; border: 1px solid rgba(99, 102, 241, 0.3);';
                        demoInfo.innerHTML = `
                            <p style="font-size: 13px; color: var(--gray-600); margin-bottom: 8px; font-weight: 600;">
                                <i class="fas fa-info-circle" style="color: var(--primary);"></i> Demo Account Available
                            </p>
                            <p style="font-size: 12px; color: var(--gray-500); margin: 0;">
                                Email: <strong>demo@eventhub.com</strong><br>
                                Password: <strong>Demo123!</strong>
                            </p>
                        `;
                        loginFooter.appendChild(demoInfo);
                    }
                }, 100);
            }
        }

        // Theme Functions
        function loadTheme() {
            const savedTheme = localStorage.getItem('eventhub-theme');
            if (savedTheme) {
                currentTheme = savedTheme;
                applyTheme(currentTheme);
            }
        }

        function applyTheme(theme) {
            document.documentElement.setAttribute('data-theme', theme);
            const themeToggle = document.getElementById('themeToggle');
            const darkModeToggle = document.getElementById('darkModeToggle');
            
            if (themeToggle) {
                themeToggle.innerHTML = theme === 'dark' ? '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';
            }
            
            if (darkModeToggle) {
                darkModeToggle.checked = theme === 'dark';
            }
            
            // Update Chart.js defaults for dark mode
            if (typeof Chart !== 'undefined') {
                Chart.defaults.color = theme === 'dark' ? '#94a3b8' : '#6b7280';
                Chart.defaults.borderColor = theme === 'dark' ? '#334155' : '#e5e7eb';
            }
        }

        function toggleTheme() {
            currentTheme = currentTheme === 'light' ? 'dark' : 'light';
            localStorage.setItem('eventhub-theme', currentTheme);
            applyTheme(currentTheme);
            showToast(`${currentTheme === 'dark' ? 'Dark' : 'Light'} mode enabled`, 'success');
        }

        function toggleThemeFromSettings() {
            const darkModeToggle = document.getElementById('darkModeToggle');
            currentTheme = darkModeToggle.checked ? 'dark' : 'light';
            localStorage.setItem('eventhub-theme', currentTheme);
            applyTheme(currentTheme);
            showToast(`${currentTheme === 'dark' ? 'Dark' : 'Light'} mode enabled`, 'success');
        }

        // Authentication Functions
        function checkAuth() {
            const session = localStorage.getItem(SESSION_KEY);
            if (session) {
                currentUser = JSON.parse(session);
                loadUserData();
                showApp();
            }
        }

        function showLogin() {
            document.getElementById('loginPage').style.display = 'flex';
            document.getElementById('registerPage').style.display = 'none';
            document.getElementById('forgotPasswordPage').style.display = 'none';
            document.getElementById('loginError').style.display = 'none';
        }

        function showRegister() {
            document.getElementById('loginPage').style.display = 'none';
            document.getElementById('registerPage').style.display = 'flex';
            document.getElementById('forgotPasswordPage').style.display = 'none';
            document.getElementById('registerError').style.display = 'none';
            document.getElementById('registerSuccess').style.display = 'none';
        }

        function showApp() {
            document.getElementById('loginPage').style.display = 'none';
            document.getElementById('registerPage').style.display = 'none';
            document.getElementById('appContainer').classList.add('active');
            updateUserInfo();
            renderEvents();
            updateStats();
            renderCalendar();
            loadNotifications();
            loadInvitations();
            loadAttendees();
            updateNotificationBadge();
        }

        // User Authentication System
        const AUTH_STORAGE_KEY = 'eventhub_users';
        const SESSION_KEY = 'eventhub_session';

        // Hash password (simple hash for demo - in production use bcrypt)
        function hashPassword(password) {
            let hash = 0;
            for (let i = 0; i < password.length; i++) {
                const char = password.charCodeAt(i);
                hash = ((hash << 5) - hash) + char;
                hash = hash & hash;
            }
            return hash.toString(16);
        }

        // Validate password strength
        function validatePassword(password) {
            const errors = [];
            if (password.length < 8) errors.push('At least 8 characters');
            if (!/[A-Z]/.test(password)) errors.push('One uppercase letter');
            if (!/[0-9]/.test(password)) errors.push('One number');
            if (!/[!@#$%^&*]/.test(password)) errors.push('One special character (!@#$%^&*)');
            return errors;
        }

        // Update password strength indicator
        function validatePasswordStrength() {
            const password = document.getElementById('regPassword').value;
            
            // Check each requirement
            document.getElementById('req-length').style.color = password.length >= 8 ? '#22c55e' : '#9ca3af';
            document.getElementById('req-length').querySelector('i').className = password.length >= 8 ? 'fas fa-check-circle' : 'fas fa-circle';
            
            document.getElementById('req-uppercase').style.color = /[A-Z]/.test(password) ? '#22c55e' : '#9ca3af';
            document.getElementById('req-uppercase').querySelector('i').className = /[A-Z]/.test(password) ? 'fas fa-check-circle' : 'fas fa-circle';
            
            document.getElementById('req-number').style.color = /[0-9]/.test(password) ? '#22c55e' : '#9ca3af';
            document.getElementById('req-number').querySelector('i').className = /[0-9]/.test(password) ? 'fas fa-check-circle' : 'fas fa-circle';
            
            document.getElementById('req-special').style.color = /[!@#$%^&*]/.test(password) ? '#22c55e' : '#9ca3af';
            document.getElementById('req-special').querySelector('i').className = /[!@#$%^&*]/.test(password) ? 'fas fa-check-circle' : 'fas fa-circle';
        }

        // Get users from storage
        function getUsers() {
            const users = localStorage.getItem(AUTH_STORAGE_KEY);
            return users ? JSON.parse(users) : {};
        }

        // Save users to storage
        function saveUsers(users) {
            localStorage.setItem(AUTH_STORAGE_KEY, JSON.stringify(users));
        }

        // Show login error
        function showLoginError(message) {
            const errorDiv = document.getElementById('loginError');
            const errorText = document.getElementById('loginErrorText');
            errorText.textContent = message;
            errorDiv.style.display = 'block';
            setTimeout(() => {
                errorDiv.style.display = 'none';
            }, 5000);
        }

        // Show register error
        function showRegisterError(message) {
            const errorDiv = document.getElementById('registerError');
            const errorText = document.getElementById('registerErrorText');
            errorText.textContent = message;
            errorDiv.style.display = 'block';
            setTimeout(() => {
                errorDiv.style.display = 'none';
            }, 5000);
        }

        // Show register success
        function showRegisterSuccess() {
            const successDiv = document.getElementById('registerSuccess');
            successDiv.style.display = 'block';
            setTimeout(() => {
                successDiv.style.display = 'none';
                showLogin();
            }, 2000);
        }

        // Login Form Handler
        document.getElementById('loginForm').addEventListener('submit', (e) => {
            e.preventDefault();
            const email = document.getElementById('email').value.toLowerCase().trim();
            const password = document.getElementById('password').value;
            
            const users = getUsers();
            const user = users[email];
            
            if (!user) {
                showLoginError('Account not found. Please check your email or register.');
                return;
            }
            
            const hashedPassword = hashPassword(password);
            if (user.password !== hashedPassword) {
                showLoginError('Incorrect password. Please try again.');
                return;
            }
            
            // Create session
            currentUser = {
                id: user.id,
                email: user.email,
                firstName: user.firstName,
                lastName: user.lastName,
                avatar: user.firstName.charAt(0).toUpperCase()
            };
            
            localStorage.setItem(SESSION_KEY, JSON.stringify(currentUser));
            loadUserData();
            showApp();
            showToast(`Welcome back, ${currentUser.firstName}!`, 'success');
            
            // Clear form
            document.getElementById('loginForm').reset();
            document.getElementById('loginError').style.display = 'none';
        });

        // Register Form Handler
        document.getElementById('registerForm').addEventListener('submit', (e) => {
            e.preventDefault();
            
            const firstName = document.getElementById('firstName').value.trim();
            const lastName = document.getElementById('lastName').value.trim();
            const email = document.getElementById('regEmail').value.toLowerCase().trim();
            const password = document.getElementById('regPassword').value;
            const confirmPassword = document.getElementById('regConfirmPassword').value;
            
            // Validate inputs
            if (!firstName || !lastName || !email || !password) {
                showRegisterError('Please fill in all fields.');
                return;
            }
            
            // Validate email format
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                showRegisterError('Please enter a valid email address.');
                return;
            }
            
            // Check if email already exists
            const users = getUsers();
            if (users[email]) {
                showRegisterError('An account with this email already exists. Please sign in.');
                return;
            }
            
            // Validate password strength
            const passwordErrors = validatePassword(password);
            if (passwordErrors.length > 0) {
                showRegisterError('Password does not meet requirements: ' + passwordErrors.join(', '));
                return;
            }
            
            // Check password match
            if (password !== confirmPassword) {
                showRegisterError('Passwords do not match.');
                return;
            }
            
            // Create user
            const userId = Date.now().toString();
            const hashedPassword = hashPassword(password);
            
            users[email] = {
                id: userId,
                email: email,
                firstName: firstName,
                lastName: lastName,
                password: hashedPassword,
                createdAt: new Date().toISOString()
            };
            
            saveUsers(users);
            
            // Clear form and show success
            document.getElementById('registerForm').reset();
            document.getElementById('registerError').style.display = 'none';
            showRegisterSuccess();
        });

        // Forgot Password Handler
        document.getElementById('forgotPasswordForm').addEventListener('submit', (e) => {
            e.preventDefault();
            const email = document.getElementById('resetEmail').value.toLowerCase().trim();
            
            const users = getUsers();
            if (!users[email]) {
                const errorDiv = document.getElementById('resetError');
                errorDiv.style.display = 'block';
                setTimeout(() => {
                    errorDiv.style.display = 'none';
                }, 5000);
                return;
            }
            
            // In a real app, this would send an email with a reset link
            // For demo, we'll generate a temporary password
            const tempPassword = Math.random().toString(36).substring(2, 10) + 'A1!';
            users[email].password = hashPassword(tempPassword);
            saveUsers(users);
            
            // Show success and temp password (in real app, this would be emailed)
            const successDiv = document.getElementById('resetSuccess');
            successDiv.innerHTML = `
                <i class="fas fa-check-circle" style="margin-right: 8px;"></i>
                <div>
                    <div>Password reset successful!</div>
                    <div style="font-size: 12px; margin-top: 4px;">
                        Your temporary password is: <strong>${tempPassword}</strong><br>
                        Please sign in and change it in Settings.
                    </div>
                </div>
            `;
            successDiv.style.display = 'block';
            
            document.getElementById('forgotPasswordForm').reset();
            document.getElementById('resetError').style.display = 'none';
            
            // Redirect to login after 5 seconds
            setTimeout(() => {
                showLogin();
                successDiv.style.display = 'none';
            }, 8000);
        });

        function showForgotPassword() {
            document.getElementById('loginPage').style.display = 'none';
            document.getElementById('registerPage').style.display = 'none';
            document.getElementById('forgotPasswordPage').style.display = 'flex';
            document.getElementById('resetError').style.display = 'none';
            document.getElementById('resetSuccess').style.display = 'none';
        }

        // Google Sign-In Handler
        function handleGoogleSignIn(response) {
            try {
                // Decode the JWT token from Google
                const credential = response.credential;
                const payload = JSON.parse(atob(credential.split('.')[1]));
                
                // Extract user information from Google profile
                const googleId = payload.sub;
                const email = payload.email;
                const firstName = payload.given_name || (payload.name ? payload.name.split(' ')[0] : 'User');
                const lastName = payload.family_name || (payload.name ? payload.name.split(' ').slice(1).join(' ') : '') || 'User';
                const picture = payload.picture;
                
                // Check if user already exists
                const users = getUsers();
                let user = users[email];
                
                if (!user) {
                    // Create new user from Google account
                    user = {
                        id: googleId,
                        email: email,
                        firstName: firstName,
                        lastName: lastName,
                        password: hashPassword(googleId + 'google_oauth'), // Secure random password
                        picture: picture,
                        authProvider: 'google',
                        createdAt: new Date().toISOString()
                    };
                    users[email] = user;
                    saveUsers(users);
                    showToast('Account created with Google!', 'success');
                } else {
                    showToast('Welcome back!', 'success');
                }
                
                // Create session
                currentUser = {
                    id: user.id,
                    email: user.email,
                    firstName: user.firstName,
                    lastName: user.lastName,
                    avatar: user.firstName.charAt(0).toUpperCase(),
                    picture: user.picture,
                    authProvider: 'google'
                };
                
                localStorage.setItem(SESSION_KEY, JSON.stringify(currentUser));
                loadUserData();
                showApp();
                
            } catch (error) {
                console.error('Google Sign-In Error:', error);
                showToast('Google Sign-In failed. Please try again.', 'error');
            }
        }

        function socialLogin(provider) {
            showToast(`${provider} login coming soon!`, 'warning');
        }

        function logout() {
            // Sign out from Google if user signed in with Google
            if (currentUser && currentUser.authProvider === 'google') {
                try {
                    if (window.google && window.google.accounts) {
                        window.google.accounts.id.disableAutoSelect();
                    }
                } catch (e) {
                    console.log('Google sign-out error:', e);
                }
            }
            
            localStorage.removeItem(SESSION_KEY);
            currentUser = null;
            events = [];
            attendees = [];
            document.getElementById('appContainer').classList.remove('active');
            showLogin();
            showToast('Logged out successfully', 'success');
        }

        // User Data Management
        function loadUserData() {
            if (!currentUser) return;
            const userEvents = localStorage.getItem(`events_${currentUser.id}`);
            events = userEvents ? JSON.parse(userEvents) : getSampleEvents();
            
            // Load invitations
            const savedInvitations = localStorage.getItem(`invitations_${currentUser.id}`);
            invitations = savedInvitations ? JSON.parse(savedInvitations) : [];

            // Load attendees
            const savedAttendees = localStorage.getItem(`attendees_${currentUser.id}`);
            attendees = savedAttendees ? JSON.parse(savedAttendees) : [];
            
            // Load settings
            const settings = localStorage.getItem(`settings_${currentUser.id}`);
            if (settings) {
                const parsed = JSON.parse(settings);
                if (parsed.emailNotifications !== undefined) {
                    document.getElementById('emailNotifications').checked = parsed.emailNotifications;
                }
                if (parsed.pushNotifications !== undefined) {
                    document.getElementById('pushNotifications').checked = parsed.pushNotifications;
                }
                if (parsed.eventReminders !== undefined) {
                    document.getElementById('eventReminders').checked = parsed.eventReminders;
                }
            }
        }

        function getSampleEvents() {
            const sampleEvents = [];
            const categories = ['Conference', 'Meeting', 'Workshop', 'Social', 'Party'];
            const today = new Date();
            
            for (let i = 0; i < 8; i++) {
                const date = new Date(today);
                date.setDate(date.getDate() + (i * 3) - 5);
                
                sampleEvents.push({
                    id: Date.now().toString() + i,
                    title: `Sample Event ${i + 1}`,
                    category: categories[i % categories.length],
                    type: 'in-person',
                    date: date.toISOString().split('T')[0],
                    time: '14:00',
                    location: 'Conference Room A',
                    description: 'This is a sample event description.',
                    createdAt: new Date().toISOString(),
                    attendees: Math.floor(Math.random() * 50) + 5,
                    shares: Math.floor(Math.random() * 20)
                });
            }
            
            // Create a sample invitation for demonstration
            setTimeout(() => {
                if (currentUser && sampleEvents.length > 0) {
                    const sampleInvitation = {
                        id: 'sample-invitation-1',
                        eventId: sampleEvents[0].id,
                        eventTitle: sampleEvents[0].title,
                        eventDate: sampleEvents[0].date,
                        recipientEmail: 'friend@example.com',
                        recipientName: 'John Smith',
                        message: 'Looking forward to seeing you there!',
                        status: 'pending',
                        sentAt: new Date(Date.now() - 86400000).toISOString() // 1 day ago
                    };
                    invitations = [sampleInvitation];
                    saveInvitations();
                }
            }, 100);
            
            return sampleEvents;
        }

        function saveUserData() {
            if (!currentUser) return;
            localStorage.setItem(`events_${currentUser.id}`, JSON.stringify(events));
        }

        function updateUserInfo() {
            if (!currentUser) return;
            document.getElementById('userName').textContent = `${currentUser.firstName} ${currentUser.lastName}`;
            document.getElementById('userEmail').textContent = currentUser.email;
            document.getElementById('userAvatar').textContent = currentUser.avatar;
            document.getElementById('settingsFirstNameDisplay').textContent = currentUser.firstName;
            document.getElementById('settingsLastNameDisplay').textContent = currentUser.lastName;
            document.getElementById('settingsEmailDisplay').textContent = currentUser.email;
            document.getElementById('settingsFirstName').value = currentUser.firstName;
            document.getElementById('settingsLastName').value = currentUser.lastName;
            document.getElementById('settingsEmailInput').value = currentUser.email;
            
            // Update EmailJS status
            const emailjsConfig = JSON.parse(localStorage.getItem('emailjs_config') || '{}');
            const emailjsStatus = document.getElementById('emailjsStatus');
            if (emailjsStatus) {
                if (emailjsConfig.serviceId && emailjsConfig.templateId && emailjsConfig.publicKey) {
                    emailjsStatus.textContent = '✓ Configured - Ready to send emails';
                    emailjsStatus.style.color = 'var(--success)';
                } else {
                    emailjsStatus.textContent = 'Not configured - Click to set up email sending';
                    emailjsStatus.style.color = 'var(--text-secondary)';
                }
            }
        }

        // Navigation
        function showSection(sectionName) {
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            const navItem = document.querySelector(`.nav-item[onclick*="'${sectionName}'"]`);
            if (navItem) navItem.classList.add('active');
            
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });
            
            const sectionMap = {
                'dashboard': { id: 'dashboardSection', title: 'Dashboard', subtitle: 'Welcome back! Here\'s what\'s happening with your events.' },
                'events': { id: 'eventsSection', title: 'My Events', subtitle: 'Manage and organize all your events.' },
                'calendar': { id: 'calendarSection', title: 'Calendar', subtitle: 'View your events in calendar format.' },
                'analytics': { id: 'analyticsSection', title: 'Analytics', subtitle: 'Track your event performance.' },
                'attendees': { id: 'attendeesSection', title: 'Attendees', subtitle: 'Manage event participants.' },
                'templates': { id: 'templatesSection', title: 'Event Templates', subtitle: 'Use pre-designed templates for your events.' },
                'settings': { id: 'settingsSection', title: 'Settings', subtitle: 'Manage your account preferences.' },
                'help': { id: 'helpSection', title: 'Help & Support', subtitle: 'Get help and learn more about EventHub.' }
            };
            
            const section = sectionMap[sectionName];
            if (section) {
                document.getElementById(section.id).classList.add('active');
                document.getElementById('pageTitle').textContent = section.title;
                document.getElementById('pageSubtitle').textContent = section.subtitle;
            }
            
            if (sectionName === 'analytics') {
                setTimeout(initAnalytics, 100);
            }
            
            if (sectionName === 'invitations') {
                renderInvitations();
            }

            if (sectionName === 'attendees') {
                renderAttendees();
            }

            updateBadge();
        }

        // Event Management
        function openCreateModal(predefinedDate = null) {
            isEditing = false;
            document.getElementById('modalTitle').textContent = 'Create New Event';
            document.getElementById('saveEventBtn').innerHTML = '<i class="fas fa-save"></i> Create Event';
            document.getElementById('eventForm').reset();
            document.getElementById('eventId').value = '';
            
            // Hide attendee management section for new events
            const attendeeSection = document.getElementById('attendeesManagementSection');
            if (attendeeSection) {
                attendeeSection.style.display = 'none';
            }
            
            if (predefinedDate) {
                document.getElementById('eventDate').value = predefinedDate;
            } else {
                document.getElementById('eventDate').value = new Date().toISOString().split('T')[0];
            }
            
            document.getElementById('eventTime').value = '09:00';
            document.getElementById('eventModal').classList.add('active');
        }

        function closeEventModal() {
            document.getElementById('eventModal').classList.remove('active');
        }

        document.getElementById('eventForm').addEventListener('submit', (e) => {
            e.preventDefault();
            
            const eventData = {
                id: isEditing ? document.getElementById('eventId').value : Date.now().toString(),
                title: document.getElementById('eventTitle').value,
                category: document.getElementById('eventCategory').value,
                type: document.getElementById('eventType').value,
                date: document.getElementById('eventDate').value,
                time: document.getElementById('eventTime').value,
                location: document.getElementById('eventLocation').value,
                description: document.getElementById('eventDescription').value,
                createdAt: isEditing ? events.find(e => e.id === document.getElementById('eventId').value)?.createdAt : new Date().toISOString(),
                attendees: isEditing ? events.find(e => e.id === document.getElementById('eventId').value)?.attendees || 0 : 0,
                shares: isEditing ? events.find(e => e.id === document.getElementById('eventId').value)?.shares || 0 : 0
            };
            
            if (isEditing) {
                const index = events.findIndex(e => e.id === eventData.id);
                if (index !== -1) {
                    // Preserve the attendees count when editing
                    eventData.attendees = events[index].attendees || 0;
                    events[index] = eventData;
                    showToast('Event updated successfully!', 'success');
                }
            } else {
                eventData.attendees = 0;
                events.unshift(eventData);
                showToast('Event created successfully!', 'success');
                
                addNotification({
                    type: 'event',
                    title: 'New Event Created',
                    message: `"${eventData.title}" has been created successfully.`,
                    time: new Date()
                });
            }
            
            saveUserData();
            renderEvents();
            updateStats();
            renderCalendar();
            closeEventModal();
        });

        function editEvent(id) {
            const event = events.find(e => e.id === id);
            if (!event) return;
            
            isEditing = true;
            document.getElementById('modalTitle').textContent = 'Edit Event';
            document.getElementById('saveEventBtn').innerHTML = '<i class="fas fa-save"></i> Update Event';
            document.getElementById('eventId').value = event.id;
            document.getElementById('eventTitle').value = event.title;
            document.getElementById('eventCategory').value = event.category;
            document.getElementById('eventType').value = event.type || 'in-person';
            document.getElementById('eventDate').value = event.date;
            document.getElementById('eventTime').value = event.time;
            document.getElementById('eventLocation').value = event.location;
            document.getElementById('eventDescription').value = event.description;
            
            // Show attendee management section
            const attendeeSection = document.getElementById('attendeesManagementSection');
            if (attendeeSection) {
                attendeeSection.style.display = 'block';
                renderEventAttendees(event.id);
            }
            
            document.getElementById('eventModal').classList.add('active');
        }

        function deleteEvent(id) {
            deleteEventId = id;
            document.getElementById('deleteModal').classList.add('active');
        }

        function closeDeleteModal() {
            document.getElementById('deleteModal').classList.remove('active');
            deleteEventId = null;
        }

        function confirmDelete() {
            if (deleteEventId) {
                const event = events.find(e => e.id === deleteEventId);
                events = events.filter(e => e.id !== deleteEventId);
                
                // Also delete invitations for this event
                invitations = invitations.filter(inv => inv.eventId !== deleteEventId);
                saveInvitations();

                // Also delete attendees for this event
                attendees = attendees.filter(att => att.eventId !== deleteEventId);
                saveAttendees();
                
                saveUserData();
                renderEvents();
                updateStats();
                renderCalendar();
                renderAttendees();
                showToast('Event deleted successfully', 'success');
                closeDeleteModal();
                
                if (event) {
                    addNotification({
                        type: 'event',
                        title: 'Event Deleted',
                        message: `"${event.title}" has been deleted.`,
                        time: new Date()
                    });
                }
            }
        }

        // Share Functionality
        function openShareModal(id) {
            shareEventId = id;
            const event = events.find(e => e.id === id);
            if (event) {
                document.getElementById('shareUrl').value = `https://eventhub.app/e/${event.id}`;
            }
            document.getElementById('shareModal').classList.add('active');
        }

        function closeShareModal() {
            document.getElementById('shareModal').classList.remove('active');
            shareEventId = null;
        }

        function shareEvent(platform) {
            const event = events.find(e => e.id === shareEventId);
            if (!event) return;
            
            const shareText = `Check out "${event.title}" on EventHub!`;
            const shareUrl = `https://eventhub.app/e/${event.id}`;
            
            switch(platform) {
                case 'whatsapp':
                    window.open(`https://wa.me/?text=${encodeURIComponent(shareText + ' ' + shareUrl)}`, '_blank');
                    break;
                case 'email':
                    window.open(`mailto:?subject=${encodeURIComponent(event.title)}&body=${encodeURIComponent(shareText + '\n\n' + shareUrl)}`, '_blank');
                    break;
                case 'facebook':
                    window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(shareUrl)}`, '_blank');
                    break;
                case 'twitter':
                    window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(shareText)}&url=${encodeURIComponent(shareUrl)}`, '_blank');
                    break;
                case 'linkedin':
                    window.open(`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(shareUrl)}`, '_blank');
                    break;
                case 'copy':
                    copyShareLink();
                    return;
            }
            
            const eventIndex = events.findIndex(e => e.id === shareEventId);
            if (eventIndex !== -1) {
                events[eventIndex].shares = (events[eventIndex].shares || 0) + 1;
                saveUserData();
                updateStats();
                
                addNotification({
                    type: 'share',
                    title: 'Event Shared',
                    message: `"${event.title}" was shared on ${platform}.`,
                    time: new Date()
                });
            }
            
            showToast(`Shared to ${platform.charAt(0).toUpperCase() + platform.slice(1)}!`, 'success');
            closeShareModal();
        }

        function copyShareLink() {
            const shareUrl = document.getElementById('shareUrl');
            shareUrl.select();
            document.execCommand('copy');
            showToast('Link copied to clipboard!', 'success');
            
            if (shareEventId) {
                const eventIndex = events.findIndex(e => e.id === shareEventId);
                if (eventIndex !== -1) {
                    events[eventIndex].shares = (events[eventIndex].shares || 0) + 1;
                    saveUserData();
                    updateStats();
                }
            }
        }

        // Calendar Functions
        function renderCalendar() {
            const grid = document.getElementById('calendarGrid');
            const monthYear = document.getElementById('calendarMonthYear');
            
            grid.innerHTML = '';
            
            const months = ['January', 'February', 'March', 'April', 'May', 'June', 
                          'July', 'August', 'September', 'October', 'November', 'December'];
            monthYear.textContent = `${months[currentDate.getMonth()]} ${currentDate.getFullYear()}`;
            
            const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
            days.forEach(day => {
                const header = document.createElement('div');
                header.className = 'calendar-day-header';
                header.textContent = day;
                grid.appendChild(header);
            });
            
            const year = currentDate.getFullYear();
            const month = currentDate.getMonth();
            const firstDay = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            const daysInPrevMonth = new Date(year, month, 0).getDate();
            
            for (let i = firstDay - 1; i >= 0; i--) {
                const day = document.createElement('div');
                day.className = 'calendar-day other-month';
                day.innerHTML = `<span class="calendar-day-number">${daysInPrevMonth - i}</span>`;
                grid.appendChild(day);
            }
            
            const today = new Date();
            for (let i = 1; i <= daysInMonth; i++) {
                const day = document.createElement('div');
                const isToday = i === today.getDate() && month === today.getMonth() && year === today.getFullYear();
                const isSelected = selectedDate && i === selectedDate.getDate() && month === selectedDate.getMonth() && year === selectedDate.getFullYear();
                
                const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(i).padStart(2, '0')}`;
                const dayEvents = events.filter(e => e.date === dateStr);
                const hasEvents = dayEvents.length > 0;
                
                let className = 'calendar-day';
                if (isToday) className += ' today';
                if (isSelected) className += ' selected';
                if (hasEvents) className += ' has-events';
                
                day.className = className;
                
                let eventsHtml = '';
                if (dayEvents.length > 0) {
                    const displayEvents = dayEvents.slice(0, 2);
                    eventsHtml = displayEvents.map(e => 
                        `<div class="calendar-event" style="background: ${getCategoryColor(e.category)}20; color: ${getCategoryColor(e.category)};">${e.title}</div>`
                    ).join('');
                    if (dayEvents.length > 2) {
                        eventsHtml += `<div class="calendar-event more">+${dayEvents.length - 2} more</div>`;
                    }
                }
                
                day.innerHTML = `
                    <span class="calendar-day-number">${i}</span>
                    <div class="calendar-events">${eventsHtml}</div>
                    <button class="add-event-btn" onclick="event.stopPropagation(); openCreateModalFromCalendar('${dateStr}')" title="Add Event">
                        <i class="fas fa-plus"></i>
                    </button>
                `;
                
                day.onclick = (e) => {
                    if (!e.target.closest('.add-event-btn')) {
                        selectDate(i);
                    }
                };
                
                grid.appendChild(day);
            }
            
            const remainingCells = 42 - (firstDay + daysInMonth);
            for (let i = 1; i <= remainingCells; i++) {
                const day = document.createElement('div');
                day.className = 'calendar-day other-month';
                day.innerHTML = `<span class="calendar-day-number">${i}</span>`;
                grid.appendChild(day);
            }
        }

        function openCreateModalFromCalendar(dateStr) {
            openCreateModal(dateStr);
        }

        function previousMonth() {
            currentDate.setMonth(currentDate.getMonth() - 1);
            renderCalendar();
        }

        function nextMonth() {
            currentDate.setMonth(currentDate.getMonth() + 1);
            renderCalendar();
        }

        function goToToday() {
            currentDate = new Date();
            selectedDate = new Date();
            renderCalendar();
        }

        function selectDate(day) {
            selectedDate = new Date(currentDate.getFullYear(), currentDate.getMonth(), day);
            renderCalendar();
            
            const dateStr = `${currentDate.getFullYear()}-${String(currentDate.getMonth() + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
            const dayEvents = events.filter(e => e.date === dateStr);
            
            if (dayEvents.length > 0) {
                showToast(`${dayEvents.length} event(s) on ${formatDate(dateStr)}`, 'success');
            }
        }

        function getCategoryColor(category) {
            const colors = {
                'Conference': '#6366f1',
                'Meeting': '#22c55e',
                'Workshop': '#f59e0b',
                'Social': '#ec4899',
                'Party': '#8b5cf6',
                'Sports': '#06b6d4',
                'Wedding': '#f43f5e',
                'Other': '#6b7280'
            };
            return colors[category] || '#6366f1';
        }

        // Analytics Functions
        function initAnalytics() {
            if (events.length === 0) return;
            
            const ctx1 = document.getElementById('eventsChart');
            if (ctx1) {
                if (eventsChart) eventsChart.destroy();
                
                const today = new Date();
                const thisMonth = events.filter(e => {
                    const eventDate = new Date(e.date);
                    return eventDate.getMonth() === today.getMonth() && eventDate.getFullYear() === today.getFullYear();
                }).length;
                
                const lastMonth = events.filter(e => {
                    const eventDate = new Date(e.date);
                    const lastMonth = new Date(today.getFullYear(), today.getMonth() - 1, 1);
                    return eventDate.getMonth() === lastMonth.getMonth() && eventDate.getFullYear() === lastMonth.getFullYear();
                }).length;
                
                eventsChart = new Chart(ctx1, {
                    type: 'doughnut',
                    data: {
                        labels: ['This Month', 'Last Month', 'Earlier'],
                        datasets: [{
                            data: [thisMonth, lastMonth, events.length - thisMonth - lastMonth],
                            backgroundColor: ['#6366f1', '#22c55e', currentTheme === 'dark' ? '#334155' : '#e5e7eb'],
                            borderWidth: 0
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom'
                            }
                        }
                    }
                });
                
                document.getElementById('analyticsTotal').textContent = events.length;
                document.getElementById('analyticsThisMonth').textContent = thisMonth;
                document.getElementById('analyticsAvg').textContent = Math.round(events.length / 6);
            }
            
            const ctx2 = document.getElementById('categoryChart');
            if (ctx2) {
                if (categoryChart) categoryChart.destroy();
                
                const categories = {};
                events.forEach(e => {
                    categories[e.category] = (categories[e.category] || 0) + 1;
                });
                
                categoryChart = new Chart(ctx2, {
                    type: 'pie',
                    data: {
                        labels: Object.keys(categories),
                        datasets: [{
                            data: Object.values(categories),
                            backgroundColor: ['#6366f1', '#22c55e', '#f59e0b', '#ec4899', '#8b5cf6', '#06b6d4', '#f43f5e', '#6b7280']
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom'
                            }
                        }
                    }
                });
            }
            
            const ctx3 = document.getElementById('trendChart');
            if (ctx3) {
                if (trendChart) trendChart.destroy();
                
                const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'];
                const monthlyData = new Array(6).fill(0);
                
                events.forEach(e => {
                    const eventDate = new Date(e.date);
                    const monthIndex = eventDate.getMonth();
                    if (monthIndex >= 0 && monthIndex < 6) {
                        monthlyData[monthIndex]++;
                    }
                });
                
                trendChart = new Chart(ctx3, {
                    type: 'line',
                    data: {
                        labels: months,
                        datasets: [{
                            label: 'Events Created',
                            data: monthlyData,
                            borderColor: '#6366f1',
                            backgroundColor: 'rgba(99, 102, 241, 0.1)',
                            fill: true,
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: false
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                ticks: {
                                    stepSize: 1
                                }
                            }
                        }
                    }
                });
            }
            
            const ctx4 = document.getElementById('attendanceChart');
            if (ctx4) {
                if (attendanceChart) attendanceChart.destroy();
                
                const topEvents = events.slice(0, 5);
                
                attendanceChart = new Chart(ctx4, {
                    type: 'bar',
                    data: {
                        labels: topEvents.map(e => e.title.substring(0, 15) + '...'),
                        datasets: [{
                            label: 'Attendees',
                            data: topEvents.map(e => e.attendees || 0),
                            backgroundColor: '#22c55e'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: false
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true
                            }
                        }
                    }
                });
            }
            
            const ctx5 = document.getElementById('performanceChart');
            if (ctx5) {
                if (performanceChart) performanceChart.destroy();
                
                performanceChart = new Chart(ctx5, {
                    type: 'radar',
                    data: {
                        labels: ['Attendees', 'Shares', 'Views', 'Registrations', 'Engagement'],
                        datasets: [{
                            label: 'Event Performance',
                            data: [
                                Math.min(events.reduce((sum, e) => sum + (e.attendees || 0), 0) / events.length, 100),
                                Math.min(events.reduce((sum, e) => sum + (e.shares || 0), 0) / events.length * 10, 100),
                                75,
                                60,
                                85
                            ],
                            backgroundColor: 'rgba(99, 102, 241, 0.2)',
                            borderColor: '#6366f1',
                            pointBackgroundColor: '#6366f1'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: false
                            }
                        },
                        scales: {
                            r: {
                                beginAtZero: true,
                                max: 100
                            }
                        }
                    }
                });
            }
        }

        // Notification Functions
        function loadNotifications() {
            const savedNotifications = localStorage.getItem(`notifications_${currentUser?.id}`);
            if (savedNotifications) {
                notifications = JSON.parse(savedNotifications);
            } else {
                notifications = [
                    {
                        id: 1,
                        type: 'event',
                        title: 'Event Reminder',
                        message: 'Your "Annual Tech Conference" is starting in 2 hours.',
                        time: new Date(Date.now() - 3600000),
                        read: false
                    },
                    {
                        id: 2,
                        type: 'share',
                        title: 'Event Shared',
                        message: 'Someone shared your "Birthday Party" event on Facebook.',
                        time: new Date(Date.now() - 7200000),
                        read: false
                    },
                    {
                        id: 3,
                        type: 'reminder',
                        title: 'Upcoming Deadline',
                        message: 'Don\'t forget to send invitations for "Wedding Reception".',
                        time: new Date(Date.now() - 86400000),
                        read: true
                    }
                ];
                saveNotifications();
            }
            renderNotifications();
        }

        function saveNotifications() {
            if (!currentUser) return;
            localStorage.setItem(`notifications_${currentUser.id}`, JSON.stringify(notifications));
        }

        function addNotification(notification) {
            notification.id = Date.now();
            notification.read = false;
            notifications.unshift(notification);
            saveNotifications();
            renderNotifications();
            updateNotificationBadge();
        }

        function renderNotifications() {
            const list = document.getElementById('notificationList');
            if (!list) return;
            
            if (notifications.length === 0) {
                list.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: var(--text-secondary);">
                        <i class="fas fa-bell-slash" style="font-size: 32px; margin-bottom: 12px;"></i>
                        <p>No notifications</p>
                    </div>
                `;
                return;
            }
            
            list.innerHTML = notifications.slice(0, 10).map(n => `
                <div class="notification-item ${n.read ? '' : 'unread'}" onclick="markAsRead(${n.id})">
                    <div class="notification-icon ${n.type}">
                        <i class="fas ${n.type === 'event' ? 'fa-calendar' : n.type === 'share' ? 'fa-share-alt' : 'fa-clock'}"></i>
                    </div>
                    <div class="notification-content">
                        <p><strong>${n.title}</strong> ${n.message}</p>
                        <span>${formatTimeAgo(n.time)}</span>
                    </div>
                    ${n.read ? '' : '<div class="notification-dot"></div>'}
                </div>
            `).join('');
        }

        function toggleNotifications() {
            const dropdown = document.getElementById('notificationDropdown');
            const btn = document.getElementById('notificationBtn');
            dropdown.classList.toggle('active');
            btn.classList.toggle('active');
        }

        function markAsRead(id) {
            const notification = notifications.find(n => n.id === id);
            if (notification) {
                notification.read = true;
                saveNotifications();
                renderNotifications();
                updateNotificationBadge();
            }
        }

        function markAllAsRead() {
            notifications.forEach(n => n.read = true);
            saveNotifications();
            renderNotifications();
            updateNotificationBadge();
            showToast('All notifications marked as read', 'success');
        }

        function updateNotificationBadge() {
            const badge = document.getElementById('notificationCount');
            const unreadCount = notifications.filter(n => !n.read).length;
            
            if (badge) {
                badge.textContent = unreadCount;
                badge.style.display = unreadCount > 0 ? 'block' : 'none';
            }
        }

        function viewAllNotifications() {
            showToast('All notifications view coming soon!', 'warning');
        }

        function formatTimeAgo(date) {
            const now = new Date();
            const diff = now - new Date(date);
            const minutes = Math.floor(diff / 60000);
            const hours = Math.floor(diff / 3600000);
            const days = Math.floor(diff / 86400000);
            
            if (minutes < 1) return 'Just now';
            if (minutes < 60) return `${minutes}m ago`;
            if (hours < 24) return `${hours}h ago`;
            if (days < 7) return `${days}d ago`;
            return new Date(date).toLocaleDateString();
        }

        // Render Functions
        function renderEvents() {
            const dashboardContainer = document.getElementById('dashboardEvents');
            const allEventsContainer = document.getElementById('allEvents');
            
            const recentEvents = events.slice(0, 3);
            
            if (events.length === 0) {
                const emptyState = `
                    <div class="empty-state">
                        <i class="fas fa-calendar-plus"></i>
                        <h3>No events yet</h3>
                        <p>Create your first event to get started!</p>
                        <button class="btn btn-primary" onclick="openCreateModal()">
                            <i class="fas fa-plus"></i>
                            Create Event
                        </button>
                    </div>
                `;
                dashboardContainer.innerHTML = emptyState;
                allEventsContainer.innerHTML = emptyState;
            } else {
                dashboardContainer.innerHTML = recentEvents.map(event => createEventCard(event)).join('');
                allEventsContainer.innerHTML = events.map(event => createEventCard(event)).join('');
            }
            
            updateBadge();
        }

        function createEventCard(event) {
            const eventDate = new Date(event.date);
            const today = new Date();
            const isPast = eventDate < today;
            
            return `
                <div class="event-card">
                    <div class="event-image">
                        <i class="fas ${getCategoryIcon(event.category)}"></i>
                        <span class="event-category-badge">${event.category}</span>
                    </div>
                    <div class="event-body">
                        <div class="event-date">
                            <i class="fas fa-calendar"></i>
                            ${formatDate(event.date)} at ${formatTime(event.time)}
                        </div>
                        <div class="event-title">${escapeHtml(event.title)}</div>
                        <div class="event-meta">
                            <span><i class="fas fa-map-marker-alt"></i> ${escapeHtml(event.location) || 'No location'}</span>
                            <span><i class="fas fa-video"></i> ${event.type || 'In-Person'}</span>
                        </div>
                        <div class="event-footer">
                            <div class="attendees">
                                <div class="attendee-avatars">
                                    <div class="attendee-avatar" style="background: var(--primary);">JD</div>
                                    <div class="attendee-avatar" style="background: var(--secondary);">AK</div>
                                    <div class="attendee-avatar" style="background: var(--success);">+${event.attendees || 0}</div>
                                </div>
                                <span class="attendee-count">${event.attendees || 0} going</span>
                            </div>
                            <div class="event-actions">
                                <button class="share" onclick="openShareModal('${event.id}')" title="Share">
                                    <i class="fas fa-share-alt"></i>
                                </button>
                                <button class="edit" onclick="editEvent('${event.id}')" title="Edit">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="delete" onclick="deleteEvent('${event.id}')" title="Delete">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function updateStats() {
            document.getElementById('statTotalEvents').textContent = events.length;
            document.getElementById('eventBadge').textContent = events.length;
            
            const today = new Date().toISOString().split('T')[0];
            const upcoming = events.filter(e => e.date >= today).length;
            document.getElementById('statUpcomingEvents').textContent = upcoming;
            
            const totalAttendees = events.reduce((sum, e) => sum + (e.attendees || 0), 0);
            document.getElementById('statTotalAttendees').textContent = totalAttendees;
            
            const totalShares = events.reduce((sum, e) => sum + (e.shares || 0), 0);
            document.getElementById('statShares').textContent = totalShares;
        }

        function updateBadge() {
            document.getElementById('eventBadge').textContent = events.length;
        }

        function filterEvents(filter) {
            document.querySelectorAll('.filter-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');
            
            const today = new Date().toISOString().split('T')[0];
            let filteredEvents = events;
            
            switch(filter) {
                case 'upcoming':
                    filteredEvents = events.filter(e => e.date >= today);
                    break;
                case 'past':
                    filteredEvents = events.filter(e => e.date < today);
                    break;
                case 'draft':
                    filteredEvents = [];
                    break;
            }
            
            const container = document.getElementById('allEvents');
            if (filteredEvents.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-search"></i>
                        <h3>No events found</h3>
                        <p>No events match the selected filter.</p>
                    </div>
                `;
            } else {
                container.innerHTML = filteredEvents.map(event => createEventCard(event)).join('');
            }
        }

        // Templates
        function useTemplate(template) {
            const templates = {
                corporate: { category: 'Meeting', title: 'Corporate Meeting', type: 'in-person' },
                birthday: { category: 'Party', title: 'Birthday Celebration', type: 'in-person' },
                wedding: { category: 'Wedding', title: 'Wedding Ceremony', type: 'in-person' }
            };
            
            const t = templates[template];
            if (t) {
                openCreateModal();
                document.getElementById('eventCategory').value = t.category;
                document.getElementById('eventTitle').value = t.title;
                document.getElementById('eventType').value = t.type;
            }
        }

        // Settings Functions
        function saveProfileSettings() {
            const firstName = document.getElementById('settingsFirstName').value;
            const lastName = document.getElementById('settingsLastName').value;
            const email = document.getElementById('settingsEmailInput').value;
            
            if (!firstName || !lastName || !email) {
                showToast('Please fill in all fields', 'error');
                return;
            }
            
            currentUser.firstName = firstName;
            currentUser.lastName = lastName;
            currentUser.email = email;
            currentUser.avatar = firstName.charAt(0).toUpperCase();
            
            localStorage.setItem(SESSION_KEY, JSON.stringify(currentUser));

            // Update users database
            const users = getUsers();
            if (users[currentUser.email]) {
                users[currentUser.email].firstName = firstName;
                users[currentUser.email].lastName = lastName;
                saveUsers(users);
            }

            updateUserInfo();
            showToast('Profile updated successfully!', 'success');
        }

        function changePassword() {
            const current = document.getElementById('currentPassword').value;
            const newPass = document.getElementById('newPassword').value;
            const confirmPass = document.getElementById('confirmPassword').value;

            if (!current || !newPass || !confirmPass) {
                showToast('Please fill in all password fields', 'error');
                return;
            }

            // Verify current password
            const users = getUsers();
            const user = users[currentUser.email];
            if (!user || user.password !== hashPassword(current)) {
                showToast('Current password is incorrect', 'error');
                return;
            }

            // Validate new password strength
            const passwordErrors = validatePassword(newPass);
            if (passwordErrors.length > 0) {
                showToast('Password does not meet requirements: ' + passwordErrors.join(', '), 'error');
                return;
            }

            if (newPass !== confirmPass) {
                showToast('New passwords do not match', 'error');
                return;
            }

            // Save new password
            user.password = hashPassword(newPass);
            saveUsers(users);

            document.getElementById('currentPassword').value = '';
            document.getElementById('newPassword').value = '';
            document.getElementById('confirmPassword').value = '';

            showToast('Password changed successfully!', 'success');
        }

        function toggleSetting(setting) {
            const value = document.getElementById(setting).checked;
            const settings = JSON.parse(localStorage.getItem(`settings_${currentUser.id}`) || '{}');
            settings[setting] = value;
            localStorage.setItem(`settings_${currentUser.id}`, JSON.stringify(settings));
            showToast(`${setting.replace(/([A-Z])/g, ' $1').replace(/^./, str => str.toUpperCase())} ${value ? 'enabled' : 'disabled'}`, 'success');
        }

        function exportData() {
            const data = {
                user: currentUser,
                events: events,
                exportDate: new Date().toISOString()
            };
            
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `eventhub-data-${currentUser.id}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showToast('Data exported successfully!', 'success');
        }

        function clearAllData() {
            if (confirm('Are you sure you want to clear all your data? This will delete all events, attendees, and cannot be undone.')) {
                events = [];
                attendees = [];
                saveUserData();
                saveAttendees();
                renderEvents();
                renderAttendees();
                updateStats();
                renderCalendar();
                showToast('All data cleared successfully', 'success');
            }
        }

        function deleteAccount() {
            if (confirm('Are you sure you want to delete your account? This action cannot be undone.')) {
                // Remove user from users database
                const users = getUsers();
                if (currentUser && users[currentUser.email]) {
                    delete users[currentUser.email];
                    saveUsers(users);
                }
                
                // Remove all user data
                localStorage.removeItem(SESSION_KEY);
                localStorage.removeItem(`events_${currentUser.id}`);
                localStorage.removeItem(`notifications_${currentUser.id}`);
                localStorage.removeItem(`settings_${currentUser.id}`);
                localStorage.removeItem(`invitations_${currentUser.id}`);
                localStorage.removeItem(`attendees_${currentUser.id}`);
                currentUser = null;
                events = [];
                attendees = [];
                document.getElementById('appContainer').classList.remove('active');
                showLogin();
                showToast('Account deleted successfully', 'success');
            }
        }

        // Toast Notifications
        function showToast(message, type = 'success') {
            const container = document.getElementById('toastContainer');
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            
            const icon = type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle';
            
            toast.innerHTML = `
                <div class="toast-icon">
                    <i class="fas fa-${icon}"></i>
                </div>
                <div class="toast-content">
                    <div class="toast-title">${type === 'success' ? 'Success' : type === 'error' ? 'Error' : 'Info'}</div>
                    <div class="toast-message">${message}</div>
                </div>
            `;
            
            container.appendChild(toast);
            
            setTimeout(() => {
                toast.style.animation = 'toastSlideIn 0.3s ease-out reverse';
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }

        // Utility Functions
        function getCategoryIcon(category) {
            const icons = {
                'Conference': 'fa-users',
                'Meeting': 'fa-handshake',
                'Workshop': 'fa-chalkboard-teacher',
                'Social': 'fa-glass-cheers',
                'Party': 'fa-birthday-cake',
                'Sports': 'fa-running',
                'Wedding': 'fa-heart',
                'Other': 'fa-calendar'
            };
            return icons[category] || 'fa-calendar';
        }

        function formatDate(dateStr) {
            const date = new Date(dateStr);
            const options = { month: 'long', day: 'numeric', year: 'numeric' };
            return date.toLocaleDateString('en-US', options);
        }

        function formatTime(timeStr) {
            const [hours, minutes] = timeStr.split(':');
            const date = new Date();
            date.setHours(parseInt(hours), parseInt(minutes));
            return date.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit' });
        }

        function escapeHtml(text) {
            if (!text) return '';
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // Invitation Functions
        let invitations = [];

        function loadInvitations() {
            if (!currentUser) return;
            const savedInvitations = localStorage.getItem(`invitations_${currentUser.id}`);
            if (savedInvitations) {
                invitations = JSON.parse(savedInvitations);
            }
            renderInvitations();
        }

        function saveInvitations() {
            if (!currentUser) return;
            localStorage.setItem(`invitations_${currentUser.id}`, JSON.stringify(invitations));
        }

        function openInvitationModal() {
            if (events.length === 0) {
                showToast('Please create an event first before sending invitations', 'warning');
                return;
            }
            
            const eventSelect = document.getElementById('invitationEvent');
            eventSelect.innerHTML = '<option value="">Choose an event...</option>';
            
            events.forEach(event => {
                const option = document.createElement('option');
                option.value = event.id;
                option.textContent = `${event.title} - ${formatDate(event.date)}`;
                eventSelect.appendChild(option);
            });
            
            document.getElementById('invitationForm').reset();
            document.getElementById('invitationModal').classList.add('active');
        }

        function closeInvitationModal() {
            document.getElementById('invitationModal').classList.remove('active');
        }

        // EmailJS Configuration Functions
        function openEmailJSConfigModal() {
            const config = JSON.parse(localStorage.getItem('emailjs_config') || '{}');
            document.getElementById('emailjsServiceId').value = config.serviceId || '';
            document.getElementById('emailjsTemplateId').value = config.templateId || '';
            document.getElementById('emailjsPublicKey').value = config.publicKey || '';
            document.getElementById('emailjsConfigModal').classList.add('active');
        }

        function closeEmailJSConfigModal() {
            document.getElementById('emailjsConfigModal').classList.remove('active');
        }

        document.getElementById('emailjsConfigForm').addEventListener('submit', (e) => {
            e.preventDefault();
            
            const config = {
                serviceId: document.getElementById('emailjsServiceId').value.trim(),
                templateId: document.getElementById('emailjsTemplateId').value.trim(),
                publicKey: document.getElementById('emailjsPublicKey').value.trim()
            };
            
            localStorage.setItem('emailjs_config', JSON.stringify(config));
            closeEmailJSConfigModal();
            showToast('Email configuration saved! You can now send real emails.', 'success');
            
            // Re-open invitation modal if it was open
            if (document.getElementById('invitationEvent').value) {
                document.getElementById('invitationModal').classList.add('active');
            }
        });

        document.getElementById('invitationForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const eventId = document.getElementById('invitationEvent').value;
            const email = document.getElementById('invitationEmail').value;
            const name = document.getElementById('invitationName').value;
            const message = document.getElementById('invitationMessage').value;
            
            const event = events.find(e => e.id === eventId);
            if (!event) {
                showToast('Event not found', 'error');
                return;
            }
            
            // Check if EmailJS is configured
            const emailjsConfig = JSON.parse(localStorage.getItem('emailjs_config') || '{}');
            if (!emailjsConfig.serviceId || !emailjsConfig.templateId || !emailjsConfig.publicKey) {
                openEmailJSConfigModal();
                return;
            }
            
            // Re-initialize EmailJS with user's credentials
            emailjs.init(emailjsConfig.publicKey);
            
            const invitation = {
                id: Date.now().toString(),
                eventId: eventId,
                eventTitle: event.title,
                eventDate: event.date,
                recipientEmail: email,
                recipientName: name || email.split('@')[0],
                message: message,
                status: 'pending',
                sentAt: new Date().toISOString()
            };
            
            // Send actual email via EmailJS
            try {
                const templateParams = {
                    to_email: email,
                    to_name: invitation.recipientName,
                    from_name: `${currentUser.firstName} ${currentUser.lastName}`,
                    event_title: event.title,
                    event_date: formatDate(event.date),
                    event_time: formatTime(event.time),
                    event_location: event.location || 'TBD',
                    event_description: event.description || '',
                    personal_message: message || 'You are invited!',
                    rsvp_link: `https://eventhub.app/invite/${invitation.id}`,
                    reply_to: currentUser.email
                };
                
                await emailjs.send(
                    emailjsConfig.serviceId,
                    emailjsConfig.templateId,
                    templateParams
                );
                
                invitations.unshift(invitation);
                saveInvitations();
                renderInvitations();
                closeInvitationModal();
                
                // Add notification
                addNotification({
                    type: 'event',
                    title: 'Invitation Sent',
                    message: `Invitation sent to ${invitation.recipientName} for "${event.title}"`,
                    time: new Date()
                });
                
                showToast('Invitation sent successfully to ' + email, 'success');
            } catch (error) {
                console.error('EmailJS Error:', error);
                showToast('Failed to send invitation. Please check your EmailJS configuration.', 'error');
            }
        });

        function renderInvitations(filter = 'all') {
            const container = document.getElementById('invitationsList');
            if (!container) return;
            
            let filteredInvitations = invitations;
            if (filter !== 'all') {
                filteredInvitations = invitations.filter(inv => inv.status === filter);
            }
            
            if (filteredInvitations.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-envelope-open"></i>
                        <h3>${filter === 'all' ? 'No invitations yet' : `No ${filter} invitations`}</h3>
                        <p>${filter === 'all' ? 'Send invitations to your events and track RSVPs here.' : `You don't have any ${filter} invitations.`}</p>
                        ${filter === 'all' ? `
                        <button class="btn btn-primary" style="width: auto; margin-top: 16px;" onclick="openInvitationModal()">
                            <i class="fas fa-plus"></i>
                            Send First Invitation
                        </button>
                        ` : ''}
                    </div>
                `;
                return;
            }
            
            container.innerHTML = filteredInvitations.map(inv => `
                <div class="event-card" style="margin-bottom: 16px;">
                    <div class="event-body">
                        <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px;">
                            <div>
                                <div class="event-title">${escapeHtml(inv.eventTitle)}</div>
                                <div class="event-date">
                                    <i class="fas fa-calendar"></i>
                                    ${formatDate(inv.eventDate)}
                                </div>
                            </div>
                            <span class="event-category-badge" style="
                                background: ${inv.status === 'accepted' ? 'rgba(34, 197, 94, 0.2)' : inv.status === 'declined' ? 'rgba(239, 68, 68, 0.2)' : 'rgba(245, 158, 11, 0.2)'};
                                color: ${inv.status === 'accepted' ? '#22c55e' : inv.status === 'declined' ? '#ef4444' : '#f59e0b'};
                            ">${inv.status.charAt(0).toUpperCase() + inv.status.slice(1)}</span>
                        </div>
                        
                        <div class="event-meta">
                            <span><i class="fas fa-user"></i> To: ${escapeHtml(inv.recipientName)} (${escapeHtml(inv.recipientEmail)})</span>
                            <span><i class="fas fa-clock"></i> Sent: ${formatTimeAgo(inv.sentAt)}</span>
                            ${inv.message ? `<span><i class="fas fa-comment"></i> "${escapeHtml(inv.message)}"</span>` : ''}
                        </div>
                        
                        <div style="display: flex; gap: 8px; margin-top: 16px;">
                            <button class="btn btn-outline btn-sm" onclick="resendInvitation('${inv.id}')" style="width: auto;">
                                <i class="fas fa-redo"></i> Resend
                            </button>
                            <button class="btn btn-danger btn-sm" onclick="deleteInvitation('${inv.id}')" style="width: auto;">
                                <i class="fas fa-trash"></i> Delete
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function filterInvitations(filter) {
            document.querySelectorAll('#invitationsSection .filter-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');
            renderInvitations(filter);
        }

        function resendInvitation(invitationId) {
            const invitation = invitations.find(inv => inv.id === invitationId);
            if (!invitation) return;
            
            const event = events.find(e => e.id === invitation.eventId);
            if (!event) {
                showToast('Event no longer exists', 'error');
                return;
            }
            
            // Update sent time
            invitation.sentAt = new Date().toISOString();
            saveInvitations();
            renderInvitations();
            
            // Resend email
            const subject = encodeURIComponent(`Reminder: You're invited to ${event.title}`);
            const body = encodeURIComponent(`Hi ${invitation.recipientName},\n\nThis is a reminder that you've been invited to ${event.title} on ${formatDate(event.date)} at ${formatTime(event.time)}.\n\nLocation: ${event.location}\n\n${invitation.message ? 'Message: ' + invitation.message + '\n\n' : ''}Click here to RSVP: https://eventhub.app/invite/${invitation.id}`);
            window.open(`mailto:${invitation.recipientEmail}?subject=${subject}&body=${body}`);
            
            showToast('Invitation resent successfully!', 'success');
        }

        function deleteInvitation(invitationId) {
            if (confirm('Are you sure you want to delete this invitation?')) {
                invitations = invitations.filter(inv => inv.id !== invitationId);
                saveInvitations();
                renderInvitations();
                showToast('Invitation deleted', 'success');
            }
        }

        // Attendee Management Functions
        let attendees = [];
        let currentEventAttendees = [];

        function loadAttendees() {
            if (!currentUser) return;
            const savedAttendees = localStorage.getItem(`attendees_${currentUser.id}`);
            attendees = savedAttendees ? JSON.parse(savedAttendees) : [];
            renderAttendees();
        }

        function saveAttendees() {
            if (!currentUser) return;
            localStorage.setItem(`attendees_${currentUser.id}`, JSON.stringify(attendees));
        }

        function openAddAttendeeModal() {
            if (events.length === 0) {
                showToast('Please create an event first before adding attendees', 'warning');
                return;
            }
            
            const eventSelect = document.getElementById('attendeeEvent');
            eventSelect.innerHTML = '<option value="">Choose an event...</option>';
            
            events.forEach(event => {
                const option = document.createElement('option');
                option.value = event.id;
                option.textContent = `${event.title} - ${formatDate(event.date)}`;
                eventSelect.appendChild(option);
            });
            
            document.getElementById('addAttendeeForm').reset();
            document.getElementById('addAttendeeModal').classList.add('active');
        }

        function closeAddAttendeeModal() {
            document.getElementById('addAttendeeModal').classList.remove('active');
        }

        function openAddAttendeeToEventModal() {
            const eventId = document.getElementById('eventId').value;
            if (!eventId) return;
            
            const event = events.find(e => e.id === eventId);
            if (!event) return;
            
            document.getElementById('attendeeEventId').value = eventId;
            document.getElementById('attendeeEventName').textContent = event.title;
            document.getElementById('addAttendeeToEventForm').reset();
            document.getElementById('addAttendeeToEventModal').classList.add('active');
        }

        function closeAddAttendeeToEventModal() {
            document.getElementById('addAttendeeToEventModal').classList.remove('active');
        }

        document.getElementById('addAttendeeForm').addEventListener('submit', (e) => {
            e.preventDefault();
            
            const eventId = document.getElementById('attendeeEvent').value;
            const firstName = document.getElementById('attendeeFirstName').value.trim();
            const lastName = document.getElementById('attendeeLastName').value.trim();
            const email = document.getElementById('attendeeEmail').value.trim();
            const phone = document.getElementById('attendeePhone').value.trim();
            const status = document.getElementById('attendeeStatus').value;
            const notes = document.getElementById('attendeeNotes').value.trim();
            
            if (!eventId) {
                showToast('Please select an event', 'error');
                return;
            }
            
            const event = events.find(e => e.id === eventId);
            if (!event) {
                showToast('Event not found', 'error');
                return;
            }
            
            const attendee = {
                id: Date.now().toString(),
                eventId: eventId,
                eventTitle: event.title,
                firstName: firstName,
                lastName: lastName,
                email: email,
                phone: phone,
                status: status,
                notes: notes,
                addedAt: new Date().toISOString()
            };
            
            attendees.push(attendee);
            saveAttendees();
            
            // Update event attendee count
            updateEventAttendeeCount(eventId);
            
            renderAttendees();
            closeAddAttendeeModal();
            showToast(`${firstName} ${lastName} added to ${event.title}`, 'success');
            
            document.getElementById('addAttendeeForm').reset();
        });

        document.getElementById('addAttendeeToEventForm').addEventListener('submit', (e) => {
            e.preventDefault();
            
            const eventId = document.getElementById('attendeeEventId').value;
            const firstName = document.getElementById('eventAttendeeFirstName').value.trim();
            const lastName = document.getElementById('eventAttendeeLastName').value.trim();
            const email = document.getElementById('eventAttendeeEmail').value.trim();
            const phone = document.getElementById('eventAttendeePhone').value.trim();
            const status = document.getElementById('eventAttendeeStatus').value;
            const notes = document.getElementById('eventAttendeeNotes').value.trim();
            
            const event = events.find(e => e.id === eventId);
            if (!event) {
                showToast('Event not found', 'error');
                return;
            }
            
            const attendee = {
                id: Date.now().toString(),
                eventId: eventId,
                eventTitle: event.title,
                firstName: firstName,
                lastName: lastName,
                email: email,
                phone: phone,
                status: status,
                notes: notes,
                addedAt: new Date().toISOString()
            };
            
            attendees.push(attendee);
            saveAttendees();
            
            // Update event attendee count
            updateEventAttendeeCount(eventId);
            
            // Refresh the attendee list in the edit modal
            renderEventAttendees(eventId);
            
            // Update main displays
            renderEvents();
            updateStats();
            renderAttendees();
            
            closeAddAttendeeToEventModal();
            showToast(`${firstName} ${lastName} added to event`, 'success');
            
            document.getElementById('addAttendeeToEventForm').reset();
        });

        function updateEventAttendeeCount(eventId) {
            const eventAttendees = attendees.filter(a => a.eventId === eventId);
            const eventIndex = events.findIndex(e => e.id === eventId);
            if (eventIndex !== -1) {
                events[eventIndex].attendees = eventAttendees.length;
                saveUserData();
            }
        }

        function renderAttendees(filter = 'all') {
            const container = document.getElementById('attendeesList');
            if (!container) return;
            
            let filteredAttendees = attendees;
            if (filter !== 'all') {
                filteredAttendees = attendees.filter(a => a.status === filter);
            }
            
            if (filteredAttendees.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-users"></i>
                        <h3>${filter === 'all' ? 'No Attendees Yet' : `No ${filter} Attendees`}</h3>
                        <p>${filter === 'all' ? 'Add attendees to your events to manage participants here.' : `You don't have any ${filter} attendees.`}</p>
                        <button class="btn btn-primary" onclick="openAddAttendeeModal()" style="width: auto; margin-top: 16px;">
                            <i class="fas fa-user-plus"></i> Add First Attendee
                        </button>
                    </div>
                `;
                return;
            }
            
            // Group attendees by event
            const attendeesByEvent = {};
            filteredAttendees.forEach(attendee => {
                if (!attendeesByEvent[attendee.eventId]) {
                    attendeesByEvent[attendee.eventId] = [];
                }
                attendeesByEvent[attendee.eventId].push(attendee);
            });
            
            let html = '';
            Object.keys(attendeesByEvent).forEach(eventId => {
                const event = events.find(e => e.id === eventId);
                const eventAttendees = attendeesByEvent[eventId];
                
                html += `
                    <div style="background: var(--card-bg); border-radius: 16px; padding: 24px; margin-bottom: 20px; border: 1px solid var(--border-color);">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; padding-bottom: 16px; border-bottom: 1px solid var(--border-color);">
                            <div>
                                <h3 style="font-size: 18px; font-weight: 700; color: var(--text-primary); margin-bottom: 4px;">${event ? event.title : 'Unknown Event'}</h3>
                                <p style="color: var(--text-secondary); font-size: 14px;">${event ? formatDate(event.date) : ''}</p>
                            </div>
                            <span style="background: var(--primary); color: white; padding: 4px 12px; border-radius: 20px; font-size: 13px; font-weight: 600;">
                                ${eventAttendees.length} attendee${eventAttendees.length !== 1 ? 's' : ''}
                            </span>
                        </div>
                        <div style="display: flex; flex-direction: column; gap: 12px;">
                `;
                
                eventAttendees.forEach(attendee => {
                    const statusColors = {
                        confirmed: '#22c55e',
                        pending: '#f59e0b',
                        declined: '#ef4444',
                        maybe: '#8b5cf6'
                    };
                    
                    html += `
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 16px; background: var(--bg-primary); border-radius: 12px;">
                            <div style="display: flex; align-items: center; gap: 12px;">
                                <div style="width: 40px; height: 40px; border-radius: 50%; background: var(--primary); display: flex; align-items: center; justify-content: center; color: white; font-weight: 600;">
                                    ${attendee.firstName.charAt(0)}${attendee.lastName.charAt(0)}
                                </div>
                                <div>
                                    <div style="font-weight: 600; color: var(--text-primary);">${attendee.firstName} ${attendee.lastName}</div>
                                    <div style="font-size: 13px; color: var(--text-secondary);">
                                        ${attendee.email}${attendee.phone ? ' • ' + attendee.phone : ''}
                                    </div>
                                    ${attendee.notes ? `<div style="font-size: 12px; color: var(--text-secondary); margin-top: 2px;"><i class="fas fa-sticky-note"></i> ${attendee.notes}</div>` : ''}
                                </div>
                            </div>
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <span style="padding: 4px 12px; border-radius: 20px; font-size: 12px; font-weight: 600; text-transform: capitalize; background: ${statusColors[attendee.status]}20; color: ${statusColors[attendee.status]};">
                                    ${attendee.status}
                                </span>
                                <button onclick="editAttendee('${attendee.id}')" style="background: none; border: none; cursor: pointer; color: var(--primary); padding: 8px;">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button onclick="deleteAttendee('${attendee.id}')" style="background: none; border: none; cursor: pointer; color: var(--danger); padding: 8px;">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                    `;
                });
                
                html += `
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        function renderEventAttendees(eventId) {
            const container = document.getElementById('eventAttendeesList');
            const emptyState = document.getElementById('eventAttendeesEmpty');
            const section = document.getElementById('attendeesManagementSection');
            
            if (!container || !section) return;
            
            const eventAttendees = attendees.filter(a => a.eventId === eventId);
            
            if (eventAttendees.length === 0) {
                container.innerHTML = '';
                emptyState.style.display = 'block';
                return;
            }
            
            emptyState.style.display = 'none';
            
            let html = '';
            eventAttendees.forEach(attendee => {
                const statusColors = {
                    confirmed: '#22c55e',
                    pending: '#f59e0b',
                    declined: '#ef4444',
                    maybe: '#8b5cf6'
                };
                
                html += `
                    <div style="display: flex; justify-content: space-between; align-items: center; padding: 12px; background: var(--bg-primary); border-radius: 8px; margin-bottom: 8px;">
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <div style="width: 32px; height: 32px; border-radius: 50%; background: var(--primary); display: flex; align-items: center; justify-content: center; color: white; font-size: 12px; font-weight: 600;">
                                ${attendee.firstName.charAt(0)}${attendee.lastName.charAt(0)}
                            </div>
                            <div>
                                <div style="font-weight: 600; color: var(--text-primary); font-size: 14px;">${attendee.firstName} ${attendee.lastName}</div>
                                <div style="font-size: 12px; color: var(--text-secondary);">${attendee.email}</div>
                            </div>
                        </div>
                        <div style="display: flex; align-items: center; gap: 6px;">
                            <span style="padding: 2px 8px; border-radius: 12px; font-size: 11px; font-weight: 600; text-transform: capitalize; background: ${statusColors[attendee.status]}20; color: ${statusColors[attendee.status]};">
                                ${attendee.status}
                            </span>
                            <button onclick="deleteEventAttendee('${attendee.id}')" style="background: none; border: none; cursor: pointer; color: var(--danger); padding: 4px; font-size: 12px;">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        function filterAttendees(filter) {
            document.querySelectorAll('#attendeesSection .filter-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');
            renderAttendees(filter);
        }

        function deleteAttendee(attendeeId) {
            if (confirm('Are you sure you want to remove this attendee?')) {
                const attendee = attendees.find(a => a.id === attendeeId);
                attendees = attendees.filter(a => a.id !== attendeeId);
                saveAttendees();
                
                if (attendee) {
                    updateEventAttendeeCount(attendee.eventId);
                }
                
                renderAttendees();
                renderEvents();
                updateStats();
                showToast('Attendee removed', 'success');
            }
        }

        function deleteEventAttendee(attendeeId) {
            if (confirm('Are you sure you want to remove this participant?')) {
                const attendee = attendees.find(a => a.id === attendeeId);
                attendees = attendees.filter(a => a.id !== attendeeId);
                saveAttendees();
                
                if (attendee) {
                    updateEventAttendeeCount(attendee.eventId);
                    renderEventAttendees(attendee.eventId);
                }
                
                renderAttendees();
                renderEvents();
                updateStats();
                showToast('Participant removed', 'success');
            }
        }

        function editAttendee(attendeeId) {
            const attendee = attendees.find(a => a.id === attendeeId);
            if (!attendee) return;
            
            // For simplicity, we'll just allow changing the status
            const statuses = ['confirmed', 'pending', 'declined', 'maybe'];
            const currentIndex = statuses.indexOf(attendee.status);
            const newStatus = statuses[(currentIndex + 1) % statuses.length];
            
            attendee.status = newStatus;
            saveAttendees();
            renderAttendees();
            showToast(`${attendee.firstName}'s status updated to ${newStatus}`, 'success');
        }

        function exportAttendees() {
            if (attendees.length === 0) {
                showToast('No attendees to export', 'warning');
                return;
            }
            
            // Create CSV content
            const headers = ['Event', 'First Name', 'Last Name', 'Email', 'Phone', 'Status', 'Notes', 'Added Date'];
            const rows = attendees.map(a => [
                a.eventTitle,
                a.firstName,
                a.lastName,
                a.email,
                a.phone || '',
                a.status,
                a.notes || '',
                new Date(a.addedAt).toLocaleDateString()
            ]);
            
            const csvContent = [headers.join(','), ...rows.map(r => r.map(cell => `"${cell}"`).join(','))].join('\n');
            
            const blob = new Blob([csvContent], { type: 'text/csv' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `eventhub-attendees-${new Date().toISOString().split('T')[0]}.csv`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showToast('Attendees exported successfully!', 'success');
        }

        // Help Center Functions
        function openDocumentationModal() {
            document.getElementById('documentationModal').classList.add('active');
        }

        function closeDocumentationModal() {
            document.getElementById('documentationModal').classList.remove('active');
        }

        function downloadDocumentation() {
            // Create a simple text documentation
            const docContent = `EventHub Documentation
======================

Getting Started
---------------
1. Creating Your First Event
   - Click the "Create Event" button
   - Fill in event details
   - Save your event

2. Managing Events
   - View all events in "My Events"
   - Use filters to organize
   - Edit or delete as needed

Calendar Features
-----------------
- Monthly calendar view
- Color-coded events
- Quick-add from calendar
- Navigate between months

Invitations
-----------
1. Setup EmailJS in Settings
2. Go to Invitations section
3. Select event and recipient
4. Send invitation

Analytics
---------
- Event statistics
- Attendance tracking
- Category breakdown
- Monthly trends

For more help, visit our Help Center.`;

            const blob = new Blob([docContent], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'EventHub-Documentation.txt';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            showToast('Documentation downloaded!', 'success');
        }

        function openVideoTutorialsModal() {
            document.getElementById('videoTutorialsModal').classList.add('active');
        }

        function closeVideoTutorialsModal() {
            document.getElementById('videoTutorialsModal').classList.remove('active');
        }

        function playVideo(videoId) {
            showToast(`Playing video: ${videoId.replace('-', ' ')}... (Demo - videos coming soon!)`, 'success');
            // In production, this would open a video player or redirect to YouTube
        }

        function openYouTubeChannel() {
            window.open('https://www.youtube.com/@EventHubApp', '_blank');
        }

        function openContactSupportModal() {
            document.getElementById('contactSupportModal').classList.add('active');
            // Pre-fill name and email if user is logged in
            if (currentUser) {
                document.getElementById('supportName').value = `${currentUser.firstName} ${currentUser.lastName}`;
                document.getElementById('supportEmail').value = currentUser.email;
            }
        }

        function closeContactSupportModal() {
            document.getElementById('contactSupportModal').classList.remove('active');
        }

        document.getElementById('supportForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const name = document.getElementById('supportName').value;
            const email = document.getElementById('supportEmail').value;
            const category = document.getElementById('supportCategory').value;
            const subject = document.getElementById('supportSubject').value;
            const message = document.getElementById('supportMessage').value;
            const attachFiles = document.getElementById('supportAttach').checked;
            
            // Check if EmailJS is configured
            const emailjsConfig = JSON.parse(localStorage.getItem('emailjs_config') || '{}');
            
            const supportData = {
                user_id: currentUser?.id || 'guest',
                user_name: name,
                user_email: email,
                category: category,
                subject: subject,
                message: message,
                submitted_at: new Date().toISOString()
            };
            
            // Save to local storage for demo purposes
            const supportTickets = JSON.parse(localStorage.getItem('support_tickets') || '[]');
            supportTickets.push(supportData);
            localStorage.setItem('support_tickets', JSON.stringify(supportTickets));
            
            closeContactSupportModal();
            showToast('Support ticket submitted! We\'ll respond within 24 hours.', 'success');
            
            // Open email client as backup
            const emailSubject = encodeURIComponent(`[EventHub Support] ${category.toUpperCase()}: ${subject}`);
            const emailBody = encodeURIComponent(`Name: ${name}\nEmail: ${email}\nCategory: ${category}\n\nMessage:\n${message}\n\n${attachFiles ? '\n[User indicated they have files to attach]' : ''}`);
            window.open(`mailto:support@eventhub.app?subject=${emailSubject}&body=${emailBody}`, '_blank');
            
            document.getElementById('supportForm').reset();
        });

        function openFeedbackModal() {
            document.getElementById('feedbackModal').classList.add('active');
            // Pre-fill email if user is logged in
            if (currentUser) {
                document.getElementById('feedbackEmail').value = currentUser.email;
            }
        }

        function closeFeedbackModal() {
            document.getElementById('feedbackModal').classList.remove('active');
            // Reset rating
            currentRating = 0;
            document.querySelectorAll('.rating-btn').forEach(btn => {
                btn.style.background = 'transparent';
                btn.style.borderColor = 'var(--border-color)';
            });
            document.getElementById('ratingText').textContent = 'Click to rate';
            document.getElementById('feedbackForm').reset();
        }

        let currentRating = 0;

        function setRating(rating) {
            currentRating = rating;
            document.getElementById('feedbackRating').value = rating;
            
            const ratingTexts = {
                1: 'Very Dissatisfied',
                2: 'Dissatisfied',
                3: 'Neutral',
                4: 'Satisfied',
                5: 'Very Satisfied'
            };
            
            document.getElementById('ratingText').textContent = ratingTexts[rating];
            
            // Update button styles
            document.querySelectorAll('.rating-btn').forEach(btn => {
                const btnRating = parseInt(btn.dataset.rating);
                if (btnRating <= rating) {
                    btn.style.background = 'var(--primary)';
                    btn.style.borderColor = 'var(--primary)';
                } else {
                    btn.style.background = 'transparent';
                    btn.style.borderColor = 'var(--border-color)';
                }
            });
        }

        document.getElementById('feedbackForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const rating = document.getElementById('feedbackRating').value;
            const type = document.getElementById('feedbackType').value;
            const message = document.getElementById('feedbackMessage').value;
            const email = document.getElementById('feedbackEmail').value;
            const newsletter = document.getElementById('feedbackNewsletter').checked;
            
            if (!rating) {
                showToast('Please select a rating', 'error');
                return;
            }
            
            const feedbackData = {
                user_id: currentUser?.id || 'guest',
                user_email: email || currentUser?.email,
                rating: parseInt(rating),
                type: type,
                message: message,
                newsletter_opt_in: newsletter,
                submitted_at: new Date().toISOString()
            };
            
            // Save to local storage
            const feedbackList = JSON.parse(localStorage.getItem('user_feedback') || '[]');
            feedbackList.push(feedbackData);
            localStorage.setItem('user_feedback', JSON.stringify(feedbackList));
            
            closeFeedbackModal();
            showToast('Thank you for your feedback! We appreciate it.', 'success');
            
            // Send via email if configured
            const emailjsConfig = JSON.parse(localStorage.getItem('emailjs_config') || '{}');
            if (emailjsConfig.serviceId && emailjsConfig.templateId) {
                try {
                    emailjs.init(emailjsConfig.publicKey);
                    await emailjs.send(emailjsConfig.serviceId, emailjsConfig.templateId, {
                        to_email: 'feedback@eventhub.app',
                        from_name: currentUser ? `${currentUser.firstName} ${currentUser.lastName}` : 'Anonymous User',
                        from_email: email || currentUser?.email || 'anonymous@eventhub.app',
                        subject: `Feedback: ${type}`,
                        message: `Rating: ${rating}/5\n\n${message}`,
                        rating: rating,
                        feedback_type: type
                    });
                } catch (error) {
                    console.error('Failed to send feedback email:', error);
                }
            }
        });

        // Event Listeners
        function toggleSidebar() {
            const sidebar = document.querySelector('.sidebar');
            const overlay = document.getElementById('sidebarOverlay');
            if (!sidebar) return;
            if (sidebar.classList.contains('open')) {
                sidebar.classList.remove('open');
                if (overlay) overlay.classList.remove('active');
            } else {
                sidebar.classList.add('open');
                if (overlay) overlay.classList.add('active');
            }
        }

        function toggleProfileMenu(_e) {
            const menu = document.getElementById('profileMenu');
            const caret = document.getElementById('profileCaret');
            if (!menu) return;
            const isOpen = menu.style.display === 'block';
            menu.style.display = isOpen ? 'none' : 'block';
            if (caret) caret.style.transform = isOpen ? 'rotate(0deg)' : 'rotate(180deg)';
        }

        function closeProfileMenu() {
            const menu = document.getElementById('profileMenu');
            const caret = document.getElementById('profileCaret');
            if (menu) menu.style.display = 'none';
            if (caret) caret.style.transform = 'rotate(0deg)';
        }

        function setupEventListeners() {
            document.querySelectorAll('.modal-overlay').forEach(overlay => {
                overlay.addEventListener('click', (e) => {
                    if (e.target === overlay) {
                        overlay.classList.remove('active');
                    }
                });
            });
            
            document.addEventListener('click', (e) => {
                const dropdown = document.getElementById('notificationDropdown');
                const btn = document.getElementById('notificationBtn');
                if (dropdown && btn && !dropdown.contains(e.target) && !btn.contains(e.target)) {
                    dropdown.classList.remove('active');
                    btn.classList.remove('active');
                }
            });
            
            const searchInput = document.getElementById('searchInput');
            if (searchInput) {
                searchInput.addEventListener('input', (e) => {
                    const query = e.target.value.toLowerCase();
                    const filtered = events.filter(event => 
                        event.title.toLowerCase().includes(query) ||
                        event.category.toLowerCase().includes(query) ||
                        event.location.toLowerCase().includes(query)
                    );
                    
                    const container = document.getElementById('allEvents');
                    if (filtered.length === 0) {
                        container.innerHTML = `
                            <div class="empty-state">
                                <i class="fas fa-search"></i>
                                <h3>No results found</h3>
                                <p>Try a different search term.</p>
                            </div>
                        `;
                    } else {
                        container.innerHTML = filtered.map(event => createEventCard(event)).join('');
                    }
                });
            }
            
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    document.querySelectorAll('.modal-overlay').forEach(modal => {
                        modal.classList.remove('active');
                    });
                    const dropdown = document.getElementById('notificationDropdown');
                    const btn = document.getElementById('notificationBtn');
                    if (dropdown && btn) {
                        dropdown.classList.remove('active');
                        btn.classList.remove('active');
                    }
                }
                if (e.ctrlKey && e.key === 'n') {
                    e.preventDefault();
                    openCreateModal();
                }
            });
        }
    </script>
</body>
</html>
